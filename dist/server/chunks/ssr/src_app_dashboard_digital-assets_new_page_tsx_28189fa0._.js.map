{"version":3,"sources":["turbopack:///[project]/src/app/dashboard/digital-assets/new/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useRef } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { useAuth } from '@/contexts/AuthContext'\nimport PermissionGuard from '@/components/auth/PermissionGuard'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\nimport { Badge } from '@/components/ui/badge'\nimport { \n  ArrowLeft, \n  Plus, \n  Upload, \n  X, \n  FileImage, \n  ImageIcon,\n  Info,\n  CheckCircle,\n  AlertCircle,\n  Loader2,\n  Tag,\n  Link,\n  RectangleHorizontal,\n  FileText\n} from 'lucide-react'\nimport { useToast } from '@/components/ui/use-toast'\n\nfunction NewDigitalAssetPageContent() {\n  const router = useRouter()\n  const { user, token } = useAuth()\n  const { toast } = useToast()\n  const fileInputRef = useRef<HTMLInputElement>(null)\n  \n  const [loading, setLoading] = useState(false)\n  const [uploading, setUploading] = useState(false)\n  const [uploadProgress, setUploadProgress] = useState(0)\n  const [previewImage, setPreviewImage] = useState<string | null>(null)\n  const [isDragOver, setIsDragOver] = useState(false)\n  const [formData, setFormData] = useState({\n    contentName: '',\n    description: '',\n    aspectRatio: 'RATIO_4_3',\n    googleDriveLink: '',\n    tags: '',\n    previewFile: null as File | null,\n  })\n\n  const handleInputChange = (field: string, value: string) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }))\n  }\n\n  // Enhanced image compression function with progress tracking\n  const compressImage = (file: File, targetSizeKB: number = 500): Promise<File> => {\n    return new Promise((resolve) => {\n      const canvas = document.createElement('canvas')\n      const ctx = canvas.getContext('2d')\n      const img = new Image()\n      \n      img.onload = () => {\n        setUploadProgress(30)\n        \n        // Start with reasonable dimensions and quality\n        let maxWidth = 1200\n        let quality = 0.9\n        let attempts = 0\n        const maxAttempts = 10\n        \n        const tryCompress = () => {\n          setUploadProgress(30 + (attempts / maxAttempts) * 50)\n          \n          // Calculate new dimensions maintaining aspect ratio\n          const ratio = Math.min(maxWidth / img.width, maxWidth / img.height)\n          canvas.width = img.width * ratio\n          canvas.height = img.height * ratio\n          \n          // Clear canvas and draw image\n          ctx?.clearRect(0, 0, canvas.width, canvas.height)\n          ctx?.drawImage(img, 0, 0, canvas.width, canvas.height)\n          \n          canvas.toBlob(\n            (blob) => {\n              if (blob) {\n                const fileSizeKB = blob.size / 1024\n                \n                // If file size is acceptable or we've tried enough times\n                if (fileSizeKB <= targetSizeKB || attempts >= maxAttempts) {\n                  setUploadProgress(100)\n                  const compressedFile = new File([blob], file.name, {\n                    type: 'image/jpeg',\n                    lastModified: Date.now(),\n                  })\n                  resolve(compressedFile)\n                } else {\n                  // File still too large, reduce quality and/or dimensions\n                  attempts++\n                  \n                  if (quality > 0.3) {\n                    // Reduce quality first\n                    quality -= 0.1\n                  } else {\n                    // If quality is already low, reduce dimensions\n                    maxWidth = Math.max(400, maxWidth * 0.8)\n                    quality = 0.7 // Reset quality when reducing dimensions\n                  }\n                  \n                  // Try again with new settings\n                  setTimeout(tryCompress, 10)\n                }\n              }\n            },\n            'image/jpeg',\n            quality\n          )\n        }\n        \n        // Start compression attempts\n        tryCompress()\n      }\n      \n      img.src = URL.createObjectURL(file)\n    })\n  }\n\n  // Handle file upload with enhanced UI feedback\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0]\n    if (!file) return\n\n    // Check file type\n    if (!file.type.startsWith('image/')) {\n      toast({\n        title: 'Error',\n        description: 'Hanya file gambar yang diperbolehkan',\n        variant: 'destructive',\n      })\n      return\n    }\n\n    // Check file size (max 20MB for original file, will be compressed to 500KB)\n    if (file.size > 20 * 1024 * 1024) {\n      toast({\n        title: 'Error',\n        description: 'Ukuran file maksimal 20MB',\n        variant: 'destructive',\n      })\n      return\n    }\n\n    try {\n      setUploading(true)\n      setUploadProgress(10)\n      \n      // Compress image\n      const compressedFile = await compressImage(file)\n      \n      // Create preview\n      const previewUrl = URL.createObjectURL(compressedFile)\n      setPreviewImage(previewUrl)\n      \n      // Update form data\n      setFormData(prev => ({\n        ...prev,\n        previewFile: compressedFile\n      }))\n      \n      toast({\n        title: 'Berhasil',\n        description: `File berhasil dikompres dari ${(file.size / 1024 / 1024).toFixed(2)}MB menjadi ${(compressedFile.size / 1024).toFixed(0)}KB`,\n      })\n    } catch (error) {\n      console.error('Error compressing image:', error)\n      toast({\n        title: 'Error',\n        description: 'Gagal mengompres gambar',\n        variant: 'destructive',\n      })\n    } finally {\n      setUploading(false)\n      setUploadProgress(0)\n    }\n  }\n\n  // Remove uploaded file\n  const handleRemoveFile = () => {\n    setPreviewImage(null)\n    setFormData(prev => ({\n      ...prev,\n      previewFile: null\n    }))\n    if (fileInputRef.current) {\n      fileInputRef.current.value = ''\n    }\n  }\n\n  // Handle drag and drop\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault()\n    setIsDragOver(true)\n  }\n\n  const handleDragLeave = (e: React.DragEvent) => {\n    e.preventDefault()\n    setIsDragOver(false)\n  }\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault()\n    setIsDragOver(false)\n    \n    const files = e.dataTransfer.files\n    if (files.length > 0) {\n      const file = files[0]\n      // Simulate file input change event\n      const event = {\n        target: { files: [file] }\n      } as any\n      handleFileUpload(event)\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    if (!formData.contentName.trim()) {\n      toast({\n        title: 'Error',\n        description: 'Nama konten harus diisi',\n        variant: 'destructive',\n      })\n      return\n    }\n\n    try {\n      setLoading(true)\n      \n      const tagsArray = formData.tags\n        .split(',')\n        .map(tag => tag.trim())\n        .filter(Boolean)\n\n      // Prepare form data for submission\n      const submitFormData = new FormData()\n      submitFormData.append('contentName', formData.contentName)\n      submitFormData.append('description', formData.description)\n      submitFormData.append('aspectRatio', formData.aspectRatio)\n      submitFormData.append('googleDriveLink', formData.googleDriveLink)\n      submitFormData.append('tags', JSON.stringify(tagsArray))\n      submitFormData.append('department', user?.department || 'Digital')\n      \n      // Add compressed preview file if exists\n      if (formData.previewFile) {\n        submitFormData.append('previewFile', formData.previewFile)\n      }\n\n      const response = await fetch('/api/digital-assets', {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n        body: submitFormData,\n      })\n\n      if (!response.ok) {\n        const errorData = await response.text()\n        throw new Error(`Failed to create digital asset: ${response.status} - ${errorData}`)\n      }\n\n      toast({\n        title: 'Berhasil',\n        description: 'Aset digital berhasil ditambahkan',\n      })\n\n      router.push('/dashboard/digital-assets')\n    } catch (error) {\n      console.error('Failed to create digital asset:', error)\n      toast({\n        title: 'Error',\n        description: 'Gagal menambahkan aset digital',\n        variant: 'destructive',\n      })\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100/50\">\n      <div className=\"container mx-auto px-4 py-8 space-y-8\">\n        {/* Enhanced Header */}\n        <div className=\"flex flex-col lg:flex-row items-start lg:items-center gap-6\">\n          <Button\n            variant=\"outline\"\n            onClick={() => router.back()}\n            className=\"flex items-center gap-2 border-gray-200 hover:bg-gray-50\"\n          >\n            <ArrowLeft className=\"h-4 w-4\" />\n            Kembali\n          </Button>\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-teal-100 rounded-lg\">\n                <Plus className=\"w-6 h-6 text-teal-600\" />\n              </div>\n              <div>\n                <h1 className=\"text-3xl font-bold text-gray-900\">Tambah Aset Digital</h1>\n                <p className=\"text-gray-600\">\n                  Tambahkan file design baru ke dalam database kreatif perusahaan\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Enhanced Form */}\n        <Card className=\"border-0 shadow-lg\">\n          <CardHeader className=\"bg-gradient-to-r from-teal-50 to-teal-100/50 rounded-t-lg\">\n            <CardTitle className=\"flex items-center gap-2 text-xl\">\n              <FileImage className=\"w-5 h-5 text-teal-600\" />\n              Informasi Aset Digital\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"p-8\">\n            <form onSubmit={handleSubmit} className=\"space-y-8\">\n              {/* Basic Information Section */}\n              <div className=\"space-y-6\">\n                <div className=\"flex items-center gap-2 mb-4\">\n                  <Info className=\"w-5 h-5 text-blue-600\" />\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Informasi Dasar</h3>\n                </div>\n                \n                <div className=\"grid gap-6 md:grid-cols-2\">\n                  {/* Content Name */}\n                  <div className=\"space-y-3\">\n                    <Label htmlFor=\"contentName\" className=\"text-sm font-medium flex items-center gap-2\">\n                      <FileText className=\"w-4 h-4 text-gray-500\" />\n                      Nama Konten <span className=\"text-red-500\">*</span>\n                    </Label>\n                    <Input\n                      id=\"contentName\"\n                      value={formData.contentName}\n                      onChange={(e) => handleInputChange('contentName', e.target.value)}\n                      placeholder=\"Masukkan nama konten\"\n                      required\n                      className=\"h-12 border-gray-200 focus:border-teal-500 focus:ring-teal-500\"\n                    />\n                  </div>\n\n                  {/* Aspect Ratio */}\n                  <div className=\"space-y-3\">\n                    <Label htmlFor=\"aspectRatio\" className=\"text-sm font-medium flex items-center gap-2\">\n                      <RectangleHorizontal className=\"w-4 h-4 text-gray-500\" />\n                      Rasio Aspek\n                    </Label>\n                    <Select\n                      value={formData.aspectRatio}\n                      onValueChange={(value) => handleInputChange('aspectRatio', value)}\n                    >\n                      <SelectTrigger className=\"h-12 border-gray-200\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"RATIO_4_3\">\n                          <div className=\"flex items-center gap-2\">\n                            <Badge variant=\"secondary\">4:3</Badge>\n                            <span>Landscape</span>\n                          </div>\n                        </SelectItem>\n                        <SelectItem value=\"RATIO_9_16\">\n                          <div className=\"flex items-center gap-2\">\n                            <Badge variant=\"secondary\">9:16</Badge>\n                            <span>Portrait</span>\n                          </div>\n                        </SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n\n                {/* Description */}\n                <div className=\"space-y-3\">\n                  <Label htmlFor=\"description\" className=\"text-sm font-medium\">Deskripsi</Label>\n                  <Textarea\n                    id=\"description\"\n                    value={formData.description}\n                    onChange={(e) => handleInputChange('description', e.target.value)}\n                    placeholder=\"Masukkan deskripsi aset digital\"\n                    rows={4}\n                    className=\"border-gray-200 focus:border-teal-500 focus:ring-teal-500 resize-none\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"border-t border-gray-200 my-8\"></div>\n\n              {/* File Upload Section */}\n              <div className=\"space-y-6\">\n                <div className=\"flex items-center gap-2 mb-4\">\n                  <Upload className=\"w-5 h-5 text-purple-600\" />\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Upload Preview File</h3>\n                </div>\n                \n                <div \n                  className={`relative border-2 border-dashed rounded-xl p-8 transition-all duration-300 ${\n                    isDragOver \n                      ? 'border-teal-500 bg-teal-50 scale-[1.02]' \n                      : 'border-gray-300 hover:border-gray-400 hover:bg-gray-50'\n                  }`}\n                  onDragOver={handleDragOver}\n                  onDragLeave={handleDragLeave}\n                  onDrop={handleDrop}\n                >\n                  {previewImage ? (\n                    <div className=\"space-y-6\">\n                      <div className=\"relative max-w-md mx-auto\">\n                        <Card className=\"border-0 shadow-md overflow-hidden\">\n                          <img\n                            src={previewImage}\n                            alt=\"Preview\"\n                            className=\"w-full h-64 object-cover\"\n                          />\n                        </Card>\n                        <Button\n                          type=\"button\"\n                          variant=\"destructive\"\n                          size=\"sm\"\n                          className=\"absolute -top-2 -right-2 rounded-full w-8 h-8 p-0 shadow-lg\"\n                          onClick={handleRemoveFile}\n                        >\n                          <X className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                      <div className=\"text-center space-y-2\">\n                        <div className=\"flex items-center justify-center gap-2\">\n                          <CheckCircle className=\"w-5 h-5 text-green-600\" />\n                          <p className=\"text-sm font-medium text-gray-900\">\n                            {formData.previewFile?.name}\n                          </p>\n                        </div>\n                        <Badge variant=\"secondary\" className=\"bg-green-100 text-green-700\">\n                          Ukuran: {formData.previewFile ? (formData.previewFile.size / 1024).toFixed(0) : '0'}KB\n                        </Badge>\n                      </div>\n                    </div>\n                  ) : (\n                    <div className=\"text-center space-y-6\">\n                      <div className=\"p-4 bg-gray-100 rounded-full w-20 h-20 mx-auto flex items-center justify-center\">\n                        <ImageIcon className=\"h-10 w-10 text-gray-400\" />\n                      </div>\n                      \n                      {uploading ? (\n                        <div className=\"space-y-4\">\n                          <div className=\"flex items-center justify-center gap-2\">\n                            <Loader2 className=\"w-5 h-5 animate-spin text-teal-600\" />\n                            <span className=\"text-sm font-medium text-gray-700\">\n                              Mengompres gambar...\n                            </span>\n                          </div>\n                          <div className=\"max-w-xs mx-auto\">\n                            <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                              <div \n                                className=\"bg-teal-600 h-2 rounded-full transition-all duration-300\" \n                                style={{ width: `${uploadProgress}%` }}\n                              ></div>\n                            </div>\n                            <p className=\"text-xs text-gray-500 mt-1 text-center\">\n                              {uploadProgress}% selesai\n                            </p>\n                          </div>\n                        </div>\n                      ) : (\n                        <div className=\"space-y-4\">\n                          <Button\n                            type=\"button\"\n                            variant=\"outline\"\n                            onClick={() => fileInputRef.current?.click()}\n                            className=\"border-2 border-dashed border-teal-300 hover:border-teal-500 hover:bg-teal-50 text-teal-700 hover:text-teal-800\"\n                            size=\"lg\"\n                          >\n                            <Upload className=\"mr-2 h-5 w-5\" />\n                            Pilih File\n                          </Button>\n                          <p className=\"text-sm text-gray-600\">\n                            atau drag & drop file disini\n                          </p>\n                        </div>\n                      )}\n                      \n                      <div className=\"bg-blue-50 rounded-lg p-4 max-w-md mx-auto\">\n                        <div className=\"flex items-start gap-2\">\n                          <Info className=\"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0\" />\n                          <div className=\"text-xs text-blue-700 space-y-1\">\n                            <p className=\"font-medium\">Format yang didukung:</p>\n                            <p>PNG, JPG, GIF hingga 20MB</p>\n                            <p>File akan dikompres otomatis menjadi maksimal 500KB untuk preview</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                  <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handleFileUpload}\n                    className=\"hidden\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"border-t border-gray-200 my-8\"></div>\n\n              {/* Additional Information Section */}\n              <div className=\"space-y-6\">\n                <div className=\"flex items-center gap-2 mb-4\">\n                  <Link className=\"w-5 h-5 text-green-600\" />\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Informasi Tambahan</h3>\n                </div>\n\n                {/* Google Drive Link */}\n                <div className=\"space-y-3\">\n                  <Label htmlFor=\"googleDriveLink\" className=\"text-sm font-medium flex items-center gap-2\">\n                    <Link className=\"w-4 h-4 text-gray-500\" />\n                    Link Google Drive\n                  </Label>\n                  <Input\n                    id=\"googleDriveLink\"\n                    type=\"url\"\n                    value={formData.googleDriveLink}\n                    onChange={(e) => handleInputChange('googleDriveLink', e.target.value)}\n                    placeholder=\"https://drive.google.com/file/d/...\"\n                    className=\"h-12 border-gray-200 focus:border-teal-500 focus:ring-teal-500\"\n                  />\n                </div>\n\n                {/* Tags */}\n                <div className=\"space-y-3\">\n                  <Label htmlFor=\"tags\" className=\"text-sm font-medium flex items-center gap-2\">\n                    <Tag className=\"w-4 h-4 text-gray-500\" />\n                    Tags\n                  </Label>\n                  <Input\n                    id=\"tags\"\n                    value={formData.tags}\n                    onChange={(e) => handleInputChange('tags', e.target.value)}\n                    placeholder=\"logo, branding, marketing\"\n                    className=\"h-12 border-gray-200 focus:border-teal-500 focus:ring-teal-500\"\n                  />\n                  <div className=\"bg-amber-50 rounded-lg p-3\">\n                    <div className=\"flex items-start gap-2\">\n                      <AlertCircle className=\"w-4 h-4 text-amber-600 mt-0.5 flex-shrink-0\" />\n                      <p className=\"text-xs text-amber-700\">\n                        Pisahkan tag dengan koma untuk memudahkan pencarian dan kategorisasi aset\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Enhanced Submit Buttons */}\n              <div className=\"flex flex-col sm:flex-row justify-end gap-4 pt-8 border-t border-gray-200\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => router.back()}\n                  disabled={loading}\n                  className=\"border-gray-200 hover:bg-gray-50\"\n                  size=\"lg\"\n                >\n                  Batal\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={loading || uploading}\n                  className=\"bg-teal-600 hover:bg-teal-700 text-white shadow-lg hover:shadow-xl transition-all duration-300\"\n                  size=\"lg\"\n                >\n                  {loading ? (\n                    <>\n                      <Loader2 className=\"animate-spin mr-2 h-5 w-5\" />\n                      Menyimpan...\n                    </>\n                  ) : (\n                    <>\n                      <Plus className=\"mr-2 h-5 w-5\" />\n                      Tambah Aset Digital\n                    </>\n                  )}\n                </Button>\n              </div>\n            </form>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  )\n}\n\nexport default function NewDigitalAssetPage() {\n  return (\n    <PermissionGuard module=\"DIGITAL_ASSETS\" permission=\"canWrite\">\n      <NewDigitalAssetPageContent />\n    </PermissionGuard>\n  )\n}\n"],"names":[],"mappings":"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"}