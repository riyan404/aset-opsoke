module.exports=[1666,a=>{"use strict";a.s(["default",()=>E],1666);var b=a.i(87924),c=a.i(72131),d=a.i(11642),e=a.i(99570),f=a.i(66718),g=a.i(91119),h=a.i(86304),i=a.i(14574),j=a.i(80701),k=a.i(33140),l=a.i(87532),m=a.i(15618),n=a.i(77156),o=a.i(24569),p=a.i(81560),q=a.i(13572),r=a.i(70106);let s=(0,r.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var t=a.i(92e3);let u=(0,r.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var v=a.i(11989),v=v,w=a.i(41675),x=a.i(46842),y=a.i(67900),z=a.i(79165);let A=a=>{if(!a)return[];try{return JSON.parse(a)}catch{return[]}},B=a=>new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}),C=c.default.memo(({asset:a,onView:d,onEdit:f,onDelete:i,canWrite:j,canDelete:k,shouldLoadImage:l})=>{let[m,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(!1);return(0,b.jsx)(g.Card,{className:"group hover:shadow-lg transition-all duration-300 border-0 shadow-md hover:shadow-xl hover:-translate-y-1",children:(0,b.jsxs)(g.CardContent,{className:"p-0",children:[(0,b.jsxs)("div",{className:"relative aspect-square bg-gradient-to-br from-gray-50 to-gray-100 rounded-t-lg overflow-hidden",children:[l&&a.previewFile&&!r?(0,b.jsx)("img",{src:a.previewFile.startsWith("data:")?a.previewFile:`data:image/jpeg;base64,${a.previewFile}`,alt:a.contentName,className:`w-full h-full object-cover transition-opacity duration-300 ${m?"opacity-100":"opacity-0"}`,onLoad:()=>q(!0),onError:()=>s(!0)}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(z.ImageIcon,{className:"w-12 h-12 text-gray-400"})}),(0,b.jsxs)("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center gap-2",children:[(0,b.jsx)(e.Button,{size:"sm",variant:"secondary",onClick:()=>d(a),className:"bg-white/90 hover:bg-white text-gray-900",children:(0,b.jsx)(n.Eye,{className:"w-4 h-4"})}),j&&(0,b.jsx)(e.Button,{size:"sm",variant:"secondary",onClick:()=>f(a),className:"bg-white/90 hover:bg-white text-gray-900",children:(0,b.jsx)(o.Edit,{className:"w-4 h-4"})}),k&&(0,b.jsx)(e.Button,{size:"sm",variant:"destructive",onClick:()=>i(a),className:"bg-red-500/90 hover:bg-red-600",children:(0,b.jsx)(p.Trash2,{className:"w-4 h-4"})})]}),(0,b.jsx)("div",{className:"absolute top-3 right-3",children:(0,b.jsx)(h.Badge,{variant:"secondary",className:"bg-white/90 text-gray-900 text-xs",children:"RATIO_4_3"===a.aspectRatio?"4:3":"9:16"})})]}),(0,b.jsxs)("div",{className:"p-4 space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 line-clamp-2 text-sm leading-tight",children:a.contentName}),a.description&&(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:a.description})]}),a.tags&&a.tags.length>0&&(0,b.jsxs)("div",{className:"flex flex-wrap gap-1",children:[A(a.tags).slice(0,2).map((a,c)=>(0,b.jsx)(h.Badge,{variant:"outline",className:"text-xs px-2 py-0.5",children:a},c)),A(a.tags).length>2&&(0,b.jsxs)(h.Badge,{variant:"outline",className:"text-xs px-2 py-0.5",children:["+",A(a.tags).length-2]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(y.Building2,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"truncate",children:a.department})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(w.Calendar,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:B(a.createdAt)})]})]})]})]})})}),D=()=>(0,b.jsx)("div",{className:"grid gap-4 sm:gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5",children:Array.from({length:12}).map((a,c)=>(0,b.jsx)(g.Card,{className:"border-0 shadow-md",children:(0,b.jsxs)(g.CardContent,{className:"p-0",children:[(0,b.jsx)(k.Skeleton,{className:"aspect-square rounded-t-lg"}),(0,b.jsxs)("div",{className:"p-4 space-y-3",children:[(0,b.jsx)(k.Skeleton,{className:"h-4 w-3/4"}),(0,b.jsx)(k.Skeleton,{className:"h-3 w-full"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(k.Skeleton,{className:"h-5 w-12"}),(0,b.jsx)(k.Skeleton,{className:"h-5 w-16"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)(k.Skeleton,{className:"h-3 w-20"}),(0,b.jsx)(k.Skeleton,{className:"h-3 w-16"})]})]})]})},c))});function E(){let{token:a}=(0,d.useAuth)(),[h,k]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,r]=(0,c.useState)(!1),[y,z]=(0,c.useState)(""),[A,E]=(0,c.useState)("all"),[F,G]=(0,c.useState)(1),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)({canRead:!0,canWrite:!0,canDelete:!1}),[P,Q]=(0,c.useState)({isOpen:!1,message:""}),{shouldLoadImages:R,markPageAsLoaded:S}=(a=>{let[b,d]=(0,c.useState)(new Set([1]));return{shouldLoadImages:(0,c.useCallback)(a=>!0,[]),markPageAsLoaded:(0,c.useCallback)(a=>{d(b=>new Set([...b,a]))},[])}})(0),T=((a,b)=>{let[d,e]=(0,c.useState)(a);return(0,c.useEffect)(()=>{let b=setTimeout(()=>{e(a)},300);return()=>{clearTimeout(b)}},[a,300]),d})(y,300),U=(0,c.useCallback)(async(b=1,c="",d="all")=>{if(a){o(!0);try{let e=new URLSearchParams({page:b.toString(),limit:"12",...c&&{search:c},..."all"!==d&&{aspectRatio:d}}),f=await fetch(`/api/digital-assets?${e}`,{method:"GET",headers:{Authorization:`Bearer ${a}`},cache:"no-store"});if(f.ok){let a=await f.json();k(a.digitalAssets||[]),I(a.pagination),S(b)}else console.error("Failed to fetch digital assets"),k([]),I(null)}catch(a){console.error("Error fetching digital assets:",a),k([]),I(null)}finally{o(!1)}}},[a]),V=(0,c.useCallback)(async()=>{if(a)try{let b=await fetch("/api/permissions/digital-assets",{method:"GET",headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json();O(a)}}catch(a){console.error("Error fetching permissions:",a)}finally{r(!0)}},[a]);(0,c.useEffect)(()=>{a&&V()},[a,V]),(0,c.useEffect)(()=>{a&&U(F,T,A)},[a,F,T,A,U]);let W=a=>{G(a),window.scrollTo({top:0,behavior:"smooth"})},X=a=>{K(a),M(!0)},Y=a=>{N.canWrite?window.location.href=`/dashboard/digital-assets/${a.id}/edit`:$("Anda tidak memiliki izin untuk mengedit aset digital")},Z=a=>{N.canDelete?console.log("Delete asset:",a.id):$("Anda tidak memiliki izin untuk menghapus aset digital")},$=a=>{Q({isOpen:!0,message:a})};return(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Aset Digital"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Database file design untuk kebutuhan kreatif perusahaan"})]}),N.canWrite?(0,b.jsxs)(e.Button,{onClick:()=>window.location.href="/dashboard/digital-assets/new",className:"bg-teal-600 hover:bg-teal-700 text-white",disabled:!p,children:[(0,b.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),p?"Tambah Aset Digital":"Loading..."]}):(0,b.jsxs)(e.Button,{onClick:()=>$("Anda tidak memiliki izin untuk menambah aset digital"),className:"bg-gray-400 hover:bg-gray-500 text-white cursor-not-allowed",children:[(0,b.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),"Tambah Aset Digital"]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-8",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(l.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,b.jsx)(f.Input,{placeholder:"Cari berdasarkan nama, deskripsi, atau tag...",value:y,onChange:a=>{z(a.target.value),G(1)},className:"pl-10"})]}),(0,b.jsxs)(j.Select,{value:A,onValueChange:a=>{E(a),G(1)},children:[(0,b.jsx)(j.SelectTrigger,{className:"w-full sm:w-48",children:(0,b.jsx)(j.SelectValue,{placeholder:"Filter Rasio"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"Semua Rasio"}),(0,b.jsx)(j.SelectItem,{value:"RATIO_4_3",children:"4:3 (Landscape)"}),(0,b.jsx)(j.SelectItem,{value:"RATIO_9_16",children:"9:16 (Portrait)"})]})]})]}),H&&(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Menampilkan ",h.length," dari ",H.total," aset"]})}),n&&0===h.length&&(0,b.jsx)(D,{}),n||0!==h.length?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid gap-4 sm:gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5",children:h.map(a=>(0,b.jsx)(C,{asset:a,onView:X,onEdit:Y,onDelete:Z,canWrite:N.canWrite,canDelete:N.canDelete,shouldLoadImage:R(F)},a.id))}),H&&H.pages>1&&(0,b.jsx)("div",{className:"mt-12 mb-6",children:(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-md p-4 max-w-3xl mx-auto",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Button,{onClick:()=>W(1),disabled:1===H.page,variant:"outline",size:"sm",children:"First"}),(0,b.jsx)(e.Button,{onClick:()=>W(H.page-1),disabled:1===H.page,variant:"outline",size:"sm",children:(0,b.jsx)(u,{className:"h-4 w-4"})})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",H.page," of ",H.pages]})}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Button,{onClick:()=>W(H.page+1),disabled:H.page===H.pages,variant:"outline",size:"sm",children:(0,b.jsx)(v.default,{className:"h-4 w-4"})}),(0,b.jsx)(e.Button,{onClick:()=>W(H.pages),disabled:H.page===H.pages,variant:"outline",size:"sm",children:"Last"})]})]})})})]}):(0,b.jsx)(g.Card,{children:(0,b.jsxs)(g.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,b.jsx)(q.FileImage,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Belum ada aset digital"}),(0,b.jsx)("p",{className:"text-gray-600 text-center mb-4",children:"Mulai menambahkan file design untuk membangun database kreatif perusahaan"}),N.canWrite&&(0,b.jsxs)(e.Button,{onClick:()=>window.location.href="/dashboard/digital-assets/new",className:"bg-teal-600 hover:bg-teal-700 text-white",children:[(0,b.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),"Tambah Aset Digital Pertama"]})]})}),(0,b.jsx)(i.Dialog,{open:L,onOpenChange:M,children:(0,b.jsxs)(i.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:J?.contentName}),(0,b.jsx)(i.DialogDescription,{children:"Detail informasi aset digital"})]}),J&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:J.previewFile?(0,b.jsx)("img",{src:J.previewFile.startsWith("data:")?J.previewFile:`data:image/jpeg;base64,${J.previewFile}`,alt:J.contentName,className:"w-full h-full object-contain"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:(0,b.jsx)(q.FileImage,{className:"w-16 h-16"})})}),J.googleDriveLink&&(0,b.jsxs)(e.Button,{onClick:()=>J.googleDriveLink&&window.open(J.googleDriveLink,"_blank"),className:"w-full bg-teal-600 hover:bg-teal-700",children:[(0,b.jsx)(s,{className:"w-4 h-4 mr-2"}),"Buka di Google Drive"]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Informasi Dasar"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Nama:"}),(0,b.jsx)("span",{className:"font-medium",children:J.contentName})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Rasio Aspek:"}),(0,b.jsx)("span",{className:"font-medium",children:"RATIO_4_3"===J.aspectRatio?"4:3 (Landscape)":"9:16 (Portrait)"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Departemen:"}),(0,b.jsx)("span",{className:"font-medium",children:J.department})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Informasi File"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Dibuat oleh:"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(x.User,{className:"w-4 h-4 text-gray-500"}),(0,b.jsxs)("span",{className:"font-medium",children:[J.createdBy.firstName," ",J.createdBy.lastName]})]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Tanggal dibuat:"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(w.Calendar,{className:"w-4 h-4 text-gray-500"}),(0,b.jsx)("span",{className:"font-medium",children:B(J.createdAt)})]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Terakhir diupdate:"}),(0,b.jsx)("span",{className:"font-medium",children:B(J.updatedAt)})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Nama file:"}),(0,b.jsx)("span",{className:"font-medium",children:J.previewFileName})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Ukuran file:"}),(0,b.jsx)("span",{className:"font-medium",children:J.previewFileSize?`${(J.previewFileSize/1024/1024).toFixed(2)} MB`:"-"})]})]})]})]})]})]})}),(0,b.jsx)(i.Dialog,{open:P.isOpen,onOpenChange:a=>Q({...P,isOpen:a}),children:(0,b.jsxs)(i.DialogContent,{children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsxs)(i.DialogTitle,{className:"flex items-center gap-2 text-red-600",children:[(0,b.jsx)(t.AlertCircle,{className:"h-5 w-5"}),"Akses Ditolak"]}),(0,b.jsx)(i.DialogDescription,{children:P.message})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)(e.Button,{onClick:()=>Q({...P,isOpen:!1}),variant:"outline",children:"Tutup"})})]})})]})}}];

//# sourceMappingURL=src_app_dashboard_digital-assets_page_tsx_1ffd11b5._.js.map