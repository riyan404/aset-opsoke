module.exports=[63195,a=>{"use strict";a.s(["default",()=>D],63195);var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(11642),f=a.i(73347),g=a.i(99570),h=a.i(91119),i=a.i(66718),j=a.i(70430),k=a.i(29246),l=a.i(80701),m=a.i(86304),n=a.i(33140),o=a.i(210),p=a.i(14548);let q=(0,a.i(70106).default)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var r=a.i(13572),s=a.i(97063),t=a.i(92e3),u=a.i(96221),v=a.i(33350),w=a.i(79257),x=a.i(56421),y=a.i(4720),z=a.i(41675),A=a.i(46842),B=a.i(83227);function C(){let a=(0,d.useRouter)(),f=(0,d.useParams)(),{user:C,token:D}=(0,e.useAuth)(),{toast:E}=(0,B.useToast)(),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(!0),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)({contentName:"",description:"",aspectRatio:"RATIO_4_3",googleDriveLink:"",tags:""}),[N,O]=(0,c.useState)({canRead:!0,canWrite:!1,canDelete:!1});(0,c.useEffect)(()=>{Q(),P()},[f.id,D]);let P=async()=>{try{let b=await fetch("/api/digital-assets",{method:"GET",headers:{Authorization:`Bearer ${D}`}});if(b.ok){let c=await b.json();O(c.permissions),c.permissions.canWrite||(E({title:"Akses Ditolak",description:"Anda tidak memiliki izin untuk mengedit aset digital",variant:"destructive"}),a.push("/dashboard/digital-assets"))}}catch(a){console.error("Failed to fetch user permissions:",a),O({canRead:!0,canWrite:!0,canDelete:!1})}},Q=async()=>{try{I(!0);let a=await fetch(`/api/digital-assets/${f.id}`,{headers:{Authorization:`Bearer ${D}`}});if(!a.ok)throw Error("Failed to fetch digital asset");let b=await a.json();K(b.digitalAsset);let c="";if(b.digitalAsset.tags)try{let a=JSON.parse(b.digitalAsset.tags);c=Array.isArray(a)?a.join(", "):b.digitalAsset.tags}catch{c=b.digitalAsset.tags}M({contentName:b.digitalAsset.contentName||"",description:b.digitalAsset.description||"",aspectRatio:b.digitalAsset.aspectRatio||"RATIO_4_3",googleDriveLink:b.digitalAsset.googleDriveLink||"",tags:c})}catch(b){console.error("Failed to fetch digital asset:",b),E({title:"Error",description:"Gagal memuat aset digital",variant:"destructive"}),a.push("/dashboard/digital-assets")}finally{I(!1)}},R=(a,b)=>{M(c=>({...c,[a]:b}))},S=async b=>{if(b.preventDefault(),!L.contentName.trim())return void E({title:"Error",description:"Nama konten harus diisi",variant:"destructive"});if(!N.canWrite)return void E({title:"Akses Ditolak",description:"Anda tidak memiliki izin untuk mengedit aset digital",variant:"destructive"});try{G(!0);let b=L.tags.split(",").map(a=>a.trim()).filter(Boolean),c=await fetch(`/api/digital-assets/${f.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`},body:JSON.stringify({...L,tags:JSON.stringify(b),department:J?.department})});if(!c.ok){let a=await c.json();throw Error(a.error||"Failed to update digital asset")}E({title:"Berhasil",description:"Aset digital berhasil diperbarui"}),a.push("/dashboard/digital-assets")}catch(a){console.error("Failed to update digital asset:",a),E({title:"Error",description:a.message||"Gagal memperbarui aset digital",variant:"destructive"})}finally{G(!1)}},T=a=>new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return H?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100/50",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-6",children:[(0,b.jsx)(n.Skeleton,{className:"h-10 w-20"}),(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(n.Skeleton,{className:"w-12 h-12 rounded-lg"}),(0,b.jsxs)("div",{children:[(0,b.jsx)(n.Skeleton,{className:"h-8 w-48 mb-2"}),(0,b.jsx)(n.Skeleton,{className:"h-4 w-64"})]})]})})]}),(0,b.jsxs)(h.Card,{className:"border-0 shadow-lg",children:[(0,b.jsx)(h.CardHeader,{className:"bg-gradient-to-r from-teal-50 to-teal-100/50 rounded-t-lg",children:(0,b.jsx)(n.Skeleton,{className:"h-6 w-40"})}),(0,b.jsx)(h.CardContent,{className:"p-8 space-y-8",children:[...Array(6)].map((a,c)=>(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(n.Skeleton,{className:"h-4 w-24"}),(0,b.jsx)(n.Skeleton,{className:"h-12 w-full"})]},c))})]})]})}):J?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100/50",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-6",children:[(0,b.jsxs)(g.Button,{variant:"outline",onClick:()=>a.back(),className:"flex items-center gap-2 border-gray-200 hover:bg-gray-50",children:[(0,b.jsx)(o.ArrowLeft,{className:"h-4 w-4"}),"Kembali"]}),(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,b.jsx)(q,{className:"w-6 h-6 text-orange-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Aset Digital"}),(0,b.jsxs)("p",{className:"text-gray-600",children:["Perbarui informasi aset digital: ",J.contentName]})]})]})})]}),(0,b.jsx)(h.Card,{className:"border-0 shadow-md bg-gradient-to-r from-blue-50 to-indigo-50",children:(0,b.jsx)(h.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[J.previewFile&&(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)(h.Card,{className:"border-0 shadow-sm overflow-hidden",children:(0,b.jsx)("img",{src:J.previewFile,alt:J.contentName,className:"w-32 h-32 object-cover"})})}),(0,b.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(z.Calendar,{className:"w-4 h-4 text-gray-500"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Dibuat"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:T(J.createdAt)})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(A.User,{className:"w-4 h-4 text-gray-500"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Dibuat oleh"}),(0,b.jsxs)("p",{className:"text-sm font-medium",children:[J.createdBy.firstName," ",J.createdBy.lastName]})]})]})]}),J.updatedAt!==J.createdAt&&(0,b.jsx)("div",{className:"pt-2 border-t border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(q,{className:"w-4 h-4 text-gray-500"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Terakhir diperbarui"}),(0,b.jsxs)("p",{className:"text-sm font-medium",children:[T(J.updatedAt)," oleh ",J.updatedBy.firstName," ",J.updatedBy.lastName]})]})]})})]})]})})}),(0,b.jsxs)(h.Card,{className:"border-0 shadow-lg",children:[(0,b.jsx)(h.CardHeader,{className:"bg-gradient-to-r from-orange-50 to-orange-100/50 rounded-t-lg",children:(0,b.jsxs)(h.CardTitle,{className:"flex items-center gap-2 text-xl",children:[(0,b.jsx)(r.FileImage,{className:"w-5 h-5 text-orange-600"}),"Edit Informasi Aset Digital"]})}),(0,b.jsx)(h.CardContent,{className:"p-8",children:(0,b.jsxs)("form",{onSubmit:S,className:"space-y-8",children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(s.Info,{className:"w-5 h-5 text-blue-600"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Informasi Dasar"})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)(j.Label,{htmlFor:"contentName",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(y.FileText,{className:"w-4 h-4 text-gray-500"}),"Nama Konten ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(i.Input,{id:"contentName",value:L.contentName,onChange:a=>R("contentName",a.target.value),placeholder:"Masukkan nama konten",required:!0,className:"h-12 border-gray-200 focus:border-orange-500 focus:ring-orange-500"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)(j.Label,{htmlFor:"aspectRatio",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(x.RectangleHorizontal,{className:"w-4 h-4 text-gray-500"}),"Rasio Aspek"]}),(0,b.jsxs)(l.Select,{value:L.aspectRatio,onValueChange:a=>R("aspectRatio",a),children:[(0,b.jsx)(l.SelectTrigger,{className:"h-12 border-gray-200",children:(0,b.jsx)(l.SelectValue,{})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"RATIO_4_3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Badge,{variant:"secondary",children:"4:3"}),(0,b.jsx)("span",{children:"Landscape"})]})}),(0,b.jsx)(l.SelectItem,{value:"RATIO_9_16",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Badge,{variant:"secondary",children:"9:16"}),(0,b.jsx)("span",{children:"Portrait"})]})})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(j.Label,{htmlFor:"description",className:"text-sm font-medium",children:"Deskripsi"}),(0,b.jsx)(k.Textarea,{id:"description",value:L.description,onChange:a=>R("description",a.target.value),placeholder:"Masukkan deskripsi aset digital",rows:4,className:"border-gray-200 focus:border-orange-500 focus:ring-orange-500 resize-none"})]})]}),(0,b.jsx)("div",{className:"border-t border-gray-200 my-8"}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(w.Link,{className:"w-5 h-5 text-green-600"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Informasi Tambahan"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)(j.Label,{htmlFor:"googleDriveLink",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(w.Link,{className:"w-4 h-4 text-gray-500"}),"Link Google Drive"]}),(0,b.jsx)(i.Input,{id:"googleDriveLink",type:"url",value:L.googleDriveLink,onChange:a=>R("googleDriveLink",a.target.value),placeholder:"https://drive.google.com/file/d/...",className:"h-12 border-gray-200 focus:border-orange-500 focus:ring-orange-500"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)(j.Label,{htmlFor:"tags",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(v.Tag,{className:"w-4 h-4 text-gray-500"}),"Tags"]}),(0,b.jsx)(i.Input,{id:"tags",value:L.tags,onChange:a=>R("tags",a.target.value),placeholder:"logo, branding, marketing",className:"h-12 border-gray-200 focus:border-orange-500 focus:ring-orange-500"}),(0,b.jsx)("div",{className:"bg-amber-50 rounded-lg p-3",children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(t.AlertCircle,{className:"w-4 h-4 text-amber-600 mt-0.5 flex-shrink-0"}),(0,b.jsx)("p",{className:"text-xs text-amber-700",children:"Pisahkan tag dengan koma untuk memudahkan pencarian dan kategorisasi aset"})]})})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-8 border-t border-gray-200",children:[(0,b.jsx)(g.Button,{type:"button",variant:"outline",onClick:()=>a.back(),disabled:F,className:"border-gray-200 hover:bg-gray-50",size:"lg",children:"Batal"}),(0,b.jsx)(g.Button,{type:"submit",disabled:F||!N.canWrite,className:"bg-orange-600 hover:bg-orange-700 text-white shadow-lg hover:shadow-xl transition-all duration-300",size:"lg",children:F?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.Loader2,{className:"animate-spin mr-2 h-5 w-5"}),"Menyimpan..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Save,{className:"mr-2 h-5 w-5"}),"Simpan Perubahan"]})})]})]})})]})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100/50 flex items-center justify-center",children:(0,b.jsx)(h.Card,{className:"border-0 shadow-lg max-w-md w-full mx-4",children:(0,b.jsxs)(h.CardContent,{className:"p-8 text-center space-y-6",children:[(0,b.jsx)("div",{className:"p-4 bg-red-100 rounded-full w-20 h-20 mx-auto flex items-center justify-center",children:(0,b.jsx)(t.AlertCircle,{className:"h-10 w-10 text-red-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aset Digital Tidak Ditemukan"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Aset digital yang Anda cari tidak dapat ditemukan atau telah dihapus."})]}),(0,b.jsx)(g.Button,{onClick:()=>a.push("/dashboard/digital-assets"),className:"bg-teal-600 hover:bg-teal-700",children:"Kembali ke Daftar Aset Digital"})]})})})}function D(){return(0,b.jsx)(f.default,{module:"DIGITAL_ASSETS",permission:"canWrite",children:(0,b.jsx)(C,{})})}}];

//# sourceMappingURL=src_app_dashboard_digital-assets_%5Bid%5D_edit_page_tsx_33467fb9._.js.map