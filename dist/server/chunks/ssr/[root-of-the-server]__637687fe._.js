module.exports=[82283,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},4720,a=>{"use strict";a.s(["FileText",()=>b],4720);let b=(0,a.i(70106).default)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},30553,a=>{"use strict";a.s(["Primitive",()=>f,"dispatchDiscreteCustomEvent",()=>g]);var b=a.i(72131),c=a.i(82283),d=a.i(11011),e=a.i(87924),f=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,c)=>{let f=(0,d.createSlot)(`Primitive.${c}`),g=b.forwardRef((a,b)=>{let{asChild:d,...g}=a;return(0,e.jsx)(d?f:c,{...g,ref:b})});return g.displayName=`Primitive.${c}`,{...a,[c]:g}},{});function g(a,b){a&&c.flushSync(()=>a.dispatchEvent(b))}},5784,a=>{"use strict";a.s(["ChevronDown",()=>b],5784);let b=(0,a.i(70106).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},83497,a=>{"use strict";a.s(["Package",()=>b],83497);let b=(0,a.i(70106).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},77192,a=>{"use strict";a.s(["Presence",()=>e]);var b=a.i(72131),c=a.i(70121),d=a.i(72752),e=a=>{let{present:e,children:g}=a,h=function(a){var c,e;let[g,h]=b.useState(),i=b.useRef(null),j=b.useRef(a),k=b.useRef("none"),[l,m]=(c=a?"mounted":"unmounted",e={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},b.useReducer((a,b)=>e[a][b]??a,c));return b.useEffect(()=>{let a=f(i.current);k.current="mounted"===l?a:"none"},[l]),(0,d.useLayoutEffect)(()=>{let b=i.current,c=j.current;if(c!==a){let d=k.current,e=f(b);a?m("MOUNT"):"none"===e||b?.display==="none"?m("UNMOUNT"):c&&d!==e?m("ANIMATION_OUT"):m("UNMOUNT"),j.current=a}},[a,m]),(0,d.useLayoutEffect)(()=>{if(g){let a,b=g.ownerDocument.defaultView??window,c=c=>{let d=f(i.current).includes(CSS.escape(c.animationName));if(c.target===g&&d&&(m("ANIMATION_END"),!j.current)){let c=g.style.animationFillMode;g.style.animationFillMode="forwards",a=b.setTimeout(()=>{"forwards"===g.style.animationFillMode&&(g.style.animationFillMode=c)})}},d=a=>{a.target===g&&(k.current=f(i.current))};return g.addEventListener("animationstart",d),g.addEventListener("animationcancel",c),g.addEventListener("animationend",c),()=>{b.clearTimeout(a),g.removeEventListener("animationstart",d),g.removeEventListener("animationcancel",c),g.removeEventListener("animationend",c)}}m("ANIMATION_END")},[g,m]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:b.useCallback(a=>{i.current=a?getComputedStyle(a):null,h(a)},[])}}(e),i="function"==typeof g?g({present:h.isPresent}):b.Children.only(g),j=(0,c.useComposedRefs)(h.ref,function(a){let b=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,c=b&&"isReactWarning"in b&&b.isReactWarning;return c?a.ref:(c=(b=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in b&&b.isReactWarning)?a.props.ref:a.props.ref||a.ref}(i));return"function"==typeof g||h.isPresent?b.cloneElement(i,{ref:j}):null};function f(a){return a?.animationName||"none"}e.displayName="Presence"},11989,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(70106).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},13572,a=>{"use strict";a.s(["FileImage",()=>b],13572);let b=(0,a.i(70106).default)("file-image",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]])},60246,a=>{"use strict";a.s(["Users",()=>b],60246);let b=(0,a.i(70106).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},67900,a=>{"use strict";a.s(["Building2",()=>b],67900);let b=(0,a.i(70106).default)("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},21161,a=>{"use strict";a.s(["Settings",()=>b],21161);let b=(0,a.i(70106).default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},90669,a=>{"use strict";a.s(["Activity",()=>b],90669);let b=(0,a.i(70106).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},54347,a=>{"use strict";a.s(["Palette",()=>b],54347);let b=(0,a.i(70106).default)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]])},2710,a=>{"use strict";a.s(["BarChart",()=>b],2710);let b=(0,a.i(70106).default)("chart-no-axes-column-increasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]])},11805,a=>{"use strict";a.s(["HardDrive",()=>b],11805);let b=(0,a.i(70106).default)("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]])},89251,a=>{"use strict";a.s(["default",()=>y],89251);var b=a.i(87924),c=a.i(11642),d=a.i(50944),e=a.i(72131),f=a.i(99570),g=a.i(35732),h=a.i(67900),i=a.i(60246),j=a.i(83497),k=a.i(4720),l=a.i(90669),m=a.i(21161),n=a.i(70106);let o=(0,n.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),p=(0,n.default)("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]);var q=a.i(33508),r=a.i(13572),s=a.i(2710),t=a.i(11805),u=a.i(5784),v=a.i(54347);let w=[{name:"Dasbor",href:"/dashboard",icon:l.Activity,group:"main"},{name:"Aset",href:"/dashboard/assets",icon:j.Package,group:"main",module:"ASSETS"},{name:"Dokumen",href:"/dashboard/documents",icon:k.FileText,group:"main",module:"DOCUMENTS"},{name:"Aset Digital",href:"/dashboard/digital-assets",icon:v.Palette,group:"main",module:"DIGITAL_ASSETS"},{name:"Laporan Arsip",href:"/dashboard/archive-reports",icon:s.BarChart,group:"reports",module:"REPORTS"},{name:"Pengguna",href:"/dashboard/users",icon:i.Users,adminOnly:!0,group:"settings",module:"USERS"},{name:"Kategori",href:"/dashboard/categories",icon:m.Settings,adminOnly:!0,group:"settings",module:"SETTINGS"},{name:"Watermark",href:"/dashboard/watermarks",icon:r.FileImage,adminOnly:!0,group:"settings",module:"SETTINGS"},{name:"Kompresi",href:"/dashboard/compression-stats",icon:t.HardDrive,adminOnly:!0,group:"settings",module:"SETTINGS"},{name:"Log Audit",href:"/dashboard/audit",icon:l.Activity,adminOnly:!0,group:"settings",module:"AUDIT_LOGS"}],x={main:{label:"Operasi Utama",showLabel:!1},reports:{label:"Laporan",showLabel:!0},settings:{label:"Pengaturan",showLabel:!0}};function y({children:a}){let{user:i,logout:j,loading:k,token:l}=(0,c.useAuth)(),n=(0,d.useRouter)(),r=(0,d.usePathname)(),[s,t]=(0,e.useState)(!1),[v,y]=(0,e.useState)({}),[z,A]=(0,e.useState)(!1);(0,e.useEffect)(()=>{console.log("DashboardLayout: useEffect - loading:",k,"user:",i),k||i||(console.log("DashboardLayout: Redirecting to login - no user found"),n.push("/login"))},[i,k,n]),(0,e.useEffect)(()=>{i&&"ADMIN"!==i.role&&l&&i.department?B():i&&A(!0)},[i,l]);let B=async()=>{if(!i?.department)return void A(!0);try{let a=await fetch(`/api/permissions?department=${encodeURIComponent(i.department)}`,{headers:{Authorization:`Bearer ${l}`}});if(a.ok){let b=await a.json(),c={};b.permissions.forEach(a=>{c[a.module]={canRead:a.canRead,canWrite:a.canWrite,canDelete:a.canDelete}}),y(c)}else{console.error("Failed to fetch permissions, status:",a.status);let b=await a.text();console.error("Error details:",b)}}catch(a){console.error("Failed to fetch user permissions:",a)}finally{A(!0)}};if(k||!z)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600"})});if(!i)return null;let C=w.filter(a=>{var b;return(!a.adminOnly||"ADMIN"===i.role)&&(!(b=a.module)||i?.role==="ADMIN"||!!b&&!!v[b]&&v[b].canRead)}).reduce((a,b)=>{let c=b.group||"main";return a[c]||(a[c]=[]),a[c].push(b),a},{}),D=()=>(0,b.jsx)(b.Fragment,{children:Object.entries(C).map(([a,c],d)=>(0,b.jsxs)("div",{children:[x[a]?.showLabel&&(0,b.jsx)("div",{className:"px-3 py-2 mt-4 first:mt-0",children:(0,b.jsx)("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:x[a]?.label})}),c.map(a=>{let c=a.icon;return(0,b.jsxs)("a",{href:a.href,className:`${r===a.href?"bg-[#0EB6B4] text-white border-r-2 border-[#187F7E]":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"} group flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-all duration-200`,children:[(0,b.jsx)(c,{className:"mr-3 h-5 w-5"}),a.name]},a.name)}),d<Object.keys(C).length-1&&(0,b.jsx)("div",{className:"my-4 border-t border-gray-200"})]},a))});return(0,b.jsxs)("div",{className:"min-h-screen",style:{backgroundColor:"var(--color-background)"},children:[(0,b.jsxs)("div",{className:`fixed inset-0 z-50 lg:hidden ${s?"block":"hidden"}`,children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>t(!1)}),(0,b.jsxs)("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white shadow-lg",children:[(0,b.jsxs)("div",{className:"flex h-16 items-center justify-between px-4 border-b border-gray-100",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-[#187F7E] to-[#00AAA8] rounded-lg flex items-center justify-center",children:(0,b.jsx)(h.Building2,{className:"h-5 w-5 text-white"})}),(0,b.jsx)("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"Orderkuota"})]}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",onClick:()=>t(!1),children:(0,b.jsx)(q.X,{className:"h-5 w-5"})})]}),(0,b.jsx)("nav",{className:"flex-1 space-y-1 px-3 py-4",children:D()})]})]}),(0,b.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:(0,b.jsxs)("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-100 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center h-16 px-4 border-b border-gray-100",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-[#187F7E] to-[#00AAA8] rounded-lg flex items-center justify-center",children:(0,b.jsx)(h.Building2,{className:"h-5 w-5 text-white"})}),(0,b.jsx)("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"Orderkuota"})]}),(0,b.jsx)("nav",{className:"flex-1 space-y-1 px-3 py-4",children:D()})]})}),(0,b.jsxs)("div",{className:"lg:pl-64",children:[(0,b.jsxs)("div",{className:"flex h-16 items-center justify-between bg-white px-4 shadow-sm border-b border-gray-100 lg:px-6",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>t(!0),children:(0,b.jsx)(p,{className:"h-6 w-6"})}),(0,b.jsx)("div",{className:"flex-1"}),(0,b.jsxs)(g.DropdownMenu,{children:[(0,b.jsx)(g.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{variant:"ghost",className:"flex items-center space-x-3 px-3 py-2",children:[(0,b.jsx)("div",{className:"h-8 w-8 rounded-full bg-gradient-to-r from-[#187F7E] to-[#0EB6B4] flex items-center justify-center",children:(0,b.jsxs)("span",{className:"text-sm font-medium text-white",children:[i.firstName.charAt(0),i.lastName.charAt(0)]})}),(0,b.jsxs)("div",{className:"hidden sm:block text-left",children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:[i.firstName," ",i.lastName]}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:i.role})]}),(0,b.jsx)(u.ChevronDown,{className:"h-4 w-4 text-gray-500"})]})}),(0,b.jsxs)(g.DropdownMenuContent,{align:"end",className:"w-56",children:[(0,b.jsx)(g.DropdownMenuLabel,{children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium",children:[i.firstName," ",i.lastName]}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:i.role})]})}),(0,b.jsx)(g.DropdownMenuSeparator,{}),(0,b.jsxs)(g.DropdownMenuItem,{onClick:()=>n.push("/dashboard/settings"),children:[(0,b.jsx)(m.Settings,{className:"mr-2 h-4 w-4"}),"Pengaturan"]}),(0,b.jsx)(g.DropdownMenuSeparator,{}),(0,b.jsxs)(g.DropdownMenuItem,{onClick:()=>{j(),n.push("/login")},className:"text-red-600",children:[(0,b.jsx)(o,{className:"mr-2 h-4 w-4"}),"Keluar"]})]})]})]}),(0,b.jsx)("main",{className:"py-8",children:(0,b.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:a})})]})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__637687fe._.js.map