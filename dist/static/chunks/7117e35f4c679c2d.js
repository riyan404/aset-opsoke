(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71689,e=>{"use strict";e.s(["ArrowLeft",()=>a],71689);let a=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},56909,e=>{"use strict";e.s(["Save",()=>a],56909);let a=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},10204,e=>{"use strict";e.s(["Label",()=>i],10204);var a=e.i(43476),s=e.i(71645),r=e.i(48425),l=s.forwardRef((e,s)=>(0,a.jsx)(r.Primitive.label,{...e,ref:s,onMouseDown:a=>{var s;a.target.closest("button, input, select, textarea")||(null==(s=e.onMouseDown)||s.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));l.displayName="Label";var t=e.i(75157);function i(e){let{className:s,...r}=e;return(0,a.jsx)(l,{"data-slot":"label",className:(0,t.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...r})}},70675,e=>{"use strict";e.s(["default",()=>h]);var a=e.i(43476),s=e.i(71645),r=e.i(18566),l=e.i(57951),t=e.i(15288),i=e.i(19455),n=e.i(93479),d=e.i(10204),c=e.i(67489),o=e.i(71689),u=e.i(56909),m=e.i(98919);function h(){let{token:e,user:h}=(0,l.useAuth)(),x=(0,r.useRouter)(),j=(0,r.useParams)(),[p,g]=(0,s.useState)(!1),[v,f]=(0,s.useState)(!0),[b,N]=(0,s.useState)([]),[S,y]=(0,s.useState)({id:"",email:"",username:"",firstName:"",lastName:"",role:"USER",department:"",position:"",isActive:!0});(0,s.useEffect)(()=>{(null==h?void 0:h.role)==="ADMIN"&&j.id&&(A(),C())},[j.id,h]);let A=async()=>{try{f(!0);let a=await fetch("/api/users/".concat(j.id),{headers:{Authorization:"Bearer ".concat(e)}});if(a.ok){let e=await a.json();y(e.user)}else console.error("Failed to fetch user data"),x.push("/dashboard/users")}catch(e){console.error("Error fetching user data:",e),x.push("/dashboard/users")}finally{f(!1)}},C=async()=>{try{let a=await fetch("/api/departments",{headers:{Authorization:"Bearer ".concat(e)}});if(a.ok){let e=await a.json();N(e.departments||[])}}catch(e){console.error("Failed to fetch departments:",e)}},w=async a=>{if(a.preventDefault(),!S.email||!S.username||!S.firstName||!S.lastName)return void alert("Harap isi semua field yang diperlukan");try{g(!0);let a=await fetch("/api/users/".concat(j.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(S)});if(a.ok)alert("Pengguna berhasil diperbarui"),x.push("/dashboard/users");else{let e=await a.json();alert(e.error||"Gagal memperbarui pengguna")}}catch(e){console.error("Error updating user:",e),alert("Gagal memperbarui pengguna")}finally{g(!1)}},I=(e,a)=>{y(s=>({...s,[e]:a}))};return(null==h?void 0:h.role)!=="ADMIN"?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(m.Shield,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Akses Ditolak"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Anda tidak memiliki izin untuk mengedit pengguna."})]})}):v?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"h-10 w-20 bg-gray-200 rounded animate-pulse"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"h-8 w-48 bg-gray-200 rounded animate-pulse mb-2"}),(0,a.jsx)("div",{className:"h-4 w-64 bg-gray-200 rounded animate-pulse"})]})]}),(0,a.jsxs)(t.Card,{children:[(0,a.jsx)(t.CardHeader,{children:(0,a.jsx)("div",{className:"h-6 w-40 bg-gray-200 rounded animate-pulse"})}),(0,a.jsx)(t.CardContent,{className:"space-y-4",children:[...Array(6)].map((e,s)=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"}),(0,a.jsx)("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"})]},s))})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(i.Button,{variant:"outline",onClick:()=>x.push("/dashboard/users"),className:"flex items-center gap-2",children:[(0,a.jsx)(o.ArrowLeft,{className:"h-4 w-4"}),"Kembali"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Pengguna"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Perbarui informasi pengguna"})]})]}),(0,a.jsxs)(t.Card,{children:[(0,a.jsx)(t.CardHeader,{children:(0,a.jsx)(t.CardTitle,{children:"Informasi Pengguna"})}),(0,a.jsx)(t.CardContent,{children:(0,a.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"firstName",children:"Nama Depan"}),(0,a.jsx)(n.Input,{id:"firstName",value:S.firstName,onChange:e=>I("firstName",e.target.value),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"lastName",children:"Nama Belakang"}),(0,a.jsx)(n.Input,{id:"lastName",value:S.lastName,onChange:e=>I("lastName",e.target.value),required:!0})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"email",children:"Email"}),(0,a.jsx)(n.Input,{id:"email",type:"email",value:S.email,onChange:e=>I("email",e.target.value),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"username",children:"Username"}),(0,a.jsx)(n.Input,{id:"username",value:S.username,onChange:e=>I("username",e.target.value),required:!0})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"role",children:"Peran"}),(0,a.jsxs)(c.Select,{value:S.role,onValueChange:e=>I("role",e),children:[(0,a.jsx)(c.SelectTrigger,{children:(0,a.jsx)(c.SelectValue,{})}),(0,a.jsxs)(c.SelectContent,{children:[(0,a.jsx)(c.SelectItem,{value:"USER",children:"User"}),(0,a.jsx)(c.SelectItem,{value:"ADMIN",children:"Admin"}),(0,a.jsx)(c.SelectItem,{value:"VIEWER",children:"Viewer"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"department",children:"Departemen"}),(0,a.jsxs)(c.Select,{value:S.department||"none",onValueChange:e=>I("department","none"===e?"":e),children:[(0,a.jsx)(c.SelectTrigger,{children:(0,a.jsx)(c.SelectValue,{placeholder:"Pilih departemen"})}),(0,a.jsxs)(c.SelectContent,{children:[(0,a.jsx)(c.SelectItem,{value:"none",children:"Tidak ada departemen"}),b.map(e=>(0,a.jsx)(c.SelectItem,{value:e.name,children:e.name},e.id))]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"position",children:"Posisi"}),(0,a.jsxs)(c.Select,{value:S.position||"none",onValueChange:e=>I("position","none"===e?"":e),children:[(0,a.jsx)(c.SelectTrigger,{children:(0,a.jsx)(c.SelectValue,{placeholder:"Pilih posisi"})}),(0,a.jsxs)(c.SelectContent,{children:[(0,a.jsx)(c.SelectItem,{value:"none",children:"Tidak ada posisi"}),(0,a.jsx)(c.SelectItem,{value:"MANAGER",children:"Manager"}),(0,a.jsx)(c.SelectItem,{value:"SUPERVISOR",children:"Supervisor"}),(0,a.jsx)(c.SelectItem,{value:"STAFF",children:"Staff"}),(0,a.jsx)(c.SelectItem,{value:"INTERN",children:"Intern"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"isActive",children:"Status"}),(0,a.jsxs)(c.Select,{value:S.isActive.toString(),onValueChange:e=>I("isActive","true"===e),children:[(0,a.jsx)(c.SelectTrigger,{children:(0,a.jsx)(c.SelectValue,{})}),(0,a.jsxs)(c.SelectContent,{children:[(0,a.jsx)(c.SelectItem,{value:"true",children:"Aktif"}),(0,a.jsx)(c.SelectItem,{value:"false",children:"Tidak Aktif"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-6",children:[(0,a.jsx)(i.Button,{type:"button",variant:"outline",onClick:()=>x.push("/dashboard/users"),disabled:p,children:"Batal"}),(0,a.jsx)(i.Button,{type:"submit",disabled:p,className:"bg-[#187F7E] hover:bg-[#00AAA8]",children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Menyimpan..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Save,{className:"mr-2 h-4 w-4"}),"Simpan Perubahan"]})})]})]})})]})]})}}]);