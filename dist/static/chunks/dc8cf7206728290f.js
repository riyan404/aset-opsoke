(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,24687,e=>{"use strict";e.s(["Textarea",()=>s]);var t=e.i(43476),a=e.i(71645),r=e.i(75157);let s=a.forwardRef((e,a)=>{let{className:s,...i}=e;return(0,t.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...i})});s.displayName="Textarea"},71689,e=>{"use strict";e.s(["ArrowLeft",()=>t],71689);let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},56909,e=>{"use strict";e.s(["Save",()=>t],56909);let t=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},10204,e=>{"use strict";e.s(["Label",()=>n],10204);var t=e.i(43476),a=e.i(71645),r=e.i(48425),s=a.forwardRef((e,a)=>(0,t.jsx)(r.Primitive.label,{...e,ref:a,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var i=e.i(75157);function n(e){let{className:a,...r}=e;return(0,t.jsx)(s,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...r})}},57428,e=>{"use strict";e.s(["Checkbox",()=>S],57428);var t=e.i(43476),a=e.i(71645),r=e.i(20783),s=e.i(30030),i=e.i(81140),n=e.i(69340),l=e.i(99682),c=e.i(35804),d=e.i(96626),o=e.i(48425),u="Checkbox",[m,h]=(0,s.createContextScope)(u),[x,p]=m(u);function g(e){let{__scopeCheckbox:r,checked:s,children:i,defaultChecked:l,disabled:c,form:d,name:o,onCheckedChange:m,required:h,value:p="on",internal_do_not_use_render:g}=e,[f,j]=(0,n.useControllableState)({prop:s,defaultProp:null!=l&&l,onChange:m,caller:u}),[b,v]=a.useState(null),[y,k]=a.useState(null),N=a.useRef(!1),C=!b||!!d||!!b.closest("form"),D={checked:f,disabled:c,setChecked:j,control:b,setControl:v,name:o,form:d,value:p,hasConsumerStoppedPropagationRef:N,required:h,defaultChecked:!w(l)&&l,isFormControl:C,bubbleInput:y,setBubbleInput:k};return(0,t.jsx)(x,{scope:r,...D,children:"function"==typeof g?g(D):i})}var f="CheckboxTrigger",j=a.forwardRef((e,s)=>{let{__scopeCheckbox:n,onKeyDown:l,onClick:c,...d}=e,{control:u,value:m,disabled:h,checked:x,required:g,setControl:j,setChecked:b,hasConsumerStoppedPropagationRef:v,isFormControl:y,bubbleInput:k}=p(f,n),N=(0,r.useComposedRefs)(s,j),D=a.useRef(x);return a.useEffect(()=>{let e=null==u?void 0:u.form;if(e){let t=()=>b(D.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[u,b]),(0,t.jsx)(o.Primitive.button,{type:"button",role:"checkbox","aria-checked":w(x)?"mixed":x,"aria-required":g,"data-state":C(x),"data-disabled":h?"":void 0,disabled:h,value:m,...d,ref:N,onKeyDown:(0,i.composeEventHandlers)(l,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.composeEventHandlers)(c,e=>{b(e=>!!w(e)||!e),k&&y&&(v.current=e.isPropagationStopped(),v.current||e.stopPropagation())})})});j.displayName=f;var b=a.forwardRef((e,a)=>{let{__scopeCheckbox:r,name:s,checked:i,defaultChecked:n,required:l,disabled:c,value:d,onCheckedChange:o,form:u,...m}=e;return(0,t.jsx)(g,{__scopeCheckbox:r,checked:i,defaultChecked:n,disabled:c,required:l,onCheckedChange:o,name:s,form:u,value:d,internal_do_not_use_render:e=>{let{isFormControl:s}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j,{...m,ref:a,__scopeCheckbox:r}),s&&(0,t.jsx)(N,{__scopeCheckbox:r})]})}})});b.displayName=u;var v="CheckboxIndicator",y=a.forwardRef((e,a)=>{let{__scopeCheckbox:r,forceMount:s,...i}=e,n=p(v,r);return(0,t.jsx)(d.Presence,{present:s||w(n.checked)||!0===n.checked,children:(0,t.jsx)(o.Primitive.span,{"data-state":C(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:a,style:{pointerEvents:"none",...e.style}})})});y.displayName=v;var k="CheckboxBubbleInput",N=a.forwardRef((e,s)=>{let{__scopeCheckbox:i,...n}=e,{control:d,hasConsumerStoppedPropagationRef:u,checked:m,defaultChecked:h,required:x,disabled:g,name:f,value:j,form:b,bubbleInput:v,setBubbleInput:y}=p(k,i),N=(0,r.useComposedRefs)(s,y),C=(0,l.usePrevious)(m),D=(0,c.useSize)(d);a.useEffect(()=>{if(!v)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!u.current;if(C!==m&&e){let a=new Event("click",{bubbles:t});v.indeterminate=w(m),e.call(v,!w(m)&&m),v.dispatchEvent(a)}},[v,C,m,u]);let S=a.useRef(!w(m)&&m);return(0,t.jsx)(o.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:null!=h?h:S.current,required:x,disabled:g,name:f,value:j,form:b,...n,tabIndex:-1,ref:N,style:{...n.style,...D,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function w(e){return"indeterminate"===e}function C(e){return w(e)?"indeterminate":e?"checked":"unchecked"}N.displayName=k;var D=e.i(43531);let S=a.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(b,{ref:a,className:"peer h-4 w-4 shrink-0 rounded-sm border border-slate-200 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-slate-900 data-[state=checked]:text-slate-50 ".concat(r||""),...s,children:(0,t.jsx)(y,{className:"flex items-center justify-center text-current",children:(0,t.jsx)(D.Check,{className:"h-4 w-4"})})})});S.displayName=b.displayName},97923,e=>{"use strict";e.s(["default",()=>g]);var t=e.i(43476),a=e.i(71645),r=e.i(18566),s=e.i(57951),i=e.i(67051),n=e.i(15288),l=e.i(19455),c=e.i(93479),d=e.i(10204),o=e.i(24687),u=e.i(67489),m=e.i(57428),h=e.i(71689),x=e.i(56909),p=e.i(78583);function g(){let{token:e,user:g}=(0,s.useAuth)(),{showSuccess:f,showError:j}=(0,i.useNotification)(),b=(0,r.useRouter)(),v=(0,r.useParams)().id,[y,k]=(0,a.useState)(null),[N,w]=(0,a.useState)([]),[C,D]=(0,a.useState)([]),[S,A]=(0,a.useState)(!0),[T,L]=(0,a.useState)(!1),[F,E]=(0,a.useState)({title:"",description:"",category:"",subcategory:"",department:"",watermark:"",tags:"",expiryDate:"",isActive:!0});(0,a.useEffect)(()=>{e&&(P(),B(),I())},[e]);let P=async()=>{try{let t=await fetch("/api/documents/".concat(v),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=(await t.json()).document;k(e);let a="";if(e.tags)try{let t=JSON.parse(e.tags);a=Array.isArray(t)?t.join(", "):e.tags}catch(t){a=e.tags}E({title:e.title||"",description:e.description||"",category:e.category||"",subcategory:e.subcategory||"",department:e.department||"",watermark:e.watermark||"",tags:a,expiryDate:e.expiryDate?new Date(e.expiryDate).toISOString().split("T")[0]:"",isActive:e.isActive})}else b.push("/dashboard/documents")}catch(e){console.error("Error fetching document:",e),b.push("/dashboard/documents")}finally{A(!1)}},B=async()=>{try{let a=await fetch("/api/categories?type=DOCUMENT",{headers:{Authorization:"Bearer ".concat(e)}});if(a.ok){var t;let e=await a.json();w((null==(t=e.categories)?void 0:t.filter(e=>e.isActive))||[])}}catch(e){console.error("Error fetching categories:",e)}},I=async()=>{try{let t=await fetch("/api/departments",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();D(e.departments||[])}}catch(e){console.error("Error fetching departments:",e)}},M=async t=>{t.preventDefault(),L(!0);try{let t=null;if(F.tags.trim()){let e=F.tags.split(",").map(e=>e.trim()).filter(e=>e);t=JSON.stringify(e)}let a={title:F.title,description:F.description,category:F.category,subcategory:F.subcategory,department:F.department,watermark:F.watermark,tags:t,expiryDate:F.expiryDate||null,isActive:F.isActive},r=await fetch("/api/documents/".concat(v),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(a)});if(r.ok)f("Dokumen berhasil diperbarui"),b.push("/dashboard/documents");else{let e=await r.json();j(e.error||"Gagal memperbarui dokumen")}}catch(e){console.error("Error updating document:",e),j("Gagal memperbarui dokumen")}finally{L(!1)}};return S?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-green-600 border-t-transparent rounded-full animate-spin"})}):y?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>b.push("/dashboard/documents"),children:[(0,t.jsx)(h.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Kembali"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Dokumen"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Ubah informasi dokumen"})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsxs)(n.CardTitle,{className:"flex items-center",children:[(0,t.jsx)(p.FileText,{className:"w-5 h-5 mr-2"}),"Informasi Dokumen"]}),(0,t.jsx)(n.CardDescription,{children:"Ubah detail dan metadata dokumen"})]}),(0,t.jsx)(n.CardContent,{children:(0,t.jsxs)("form",{onSubmit:M,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)(d.Label,{htmlFor:"title",children:"Judul Dokumen *"}),(0,t.jsx)(c.Input,{id:"title",value:F.title,onChange:e=>E(t=>({...t,title:e.target.value})),required:!0})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)(d.Label,{htmlFor:"description",children:"Deskripsi"}),(0,t.jsx)(o.Textarea,{id:"description",rows:3,value:F.description,onChange:e=>E(t=>({...t,description:e.target.value}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.Label,{htmlFor:"category",children:"Kategori *"}),(0,t.jsxs)(u.Select,{value:F.category,onValueChange:e=>E(t=>({...t,category:e})),children:[(0,t.jsx)(u.SelectTrigger,{children:(0,t.jsx)(u.SelectValue,{placeholder:"Pilih kategori"})}),(0,t.jsx)(u.SelectContent,{children:N.map(e=>(0,t.jsx)(u.SelectItem,{value:e.name,children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.Label,{htmlFor:"subcategory",children:"Sub Kategori"}),(0,t.jsx)(c.Input,{id:"subcategory",value:F.subcategory,onChange:e=>E(t=>({...t,subcategory:e.target.value}))})]}),(null==g?void 0:g.role)==="ADMIN"&&(0,t.jsxs)("div",{children:[(0,t.jsx)(d.Label,{htmlFor:"department",children:"Departemen"}),(0,t.jsxs)(u.Select,{value:F.department,onValueChange:e=>E(t=>({...t,department:e})),children:[(0,t.jsx)(u.SelectTrigger,{children:(0,t.jsx)(u.SelectValue,{placeholder:"Pilih departemen"})}),(0,t.jsx)(u.SelectContent,{children:C.map(e=>(0,t.jsx)(u.SelectItem,{value:e.name,children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.Label,{htmlFor:"expiryDate",children:"Tanggal Kedaluwarsa"}),(0,t.jsx)(c.Input,{id:"expiryDate",type:"date",value:F.expiryDate,onChange:e=>E(t=>({...t,expiryDate:e.target.value}))})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)(d.Label,{htmlFor:"tags",children:"Tags"}),(0,t.jsx)(c.Input,{id:"tags",placeholder:"Pisahkan dengan koma (contoh: urgent, confidential, policy)",value:F.tags,onChange:e=>E(t=>({...t,tags:e.target.value}))}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Gunakan koma untuk memisahkan multiple tags"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)(d.Label,{htmlFor:"watermark",children:"Custom Watermark"}),(0,t.jsx)(c.Input,{id:"watermark",placeholder:"Teks watermark untuk dokumen ini",value:F.watermark,onChange:e=>E(t=>({...t,watermark:e.target.value}))})]}),(0,t.jsx)("div",{className:"md:col-span-2",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(m.Checkbox,{id:"isActive",checked:F.isActive,onCheckedChange:e=>E(t=>({...t,isActive:e}))}),(0,t.jsx)(d.Label,{htmlFor:"isActive",children:"Dokumen Aktif"})]})})]}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)(l.Button,{type:"submit",disabled:T,className:"bg-green-600 hover:bg-green-700",children:T?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Menyimpan..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Save,{className:"w-4 h-4 mr-2"}),"Simpan Perubahan"]})}),(0,t.jsx)(l.Button,{type:"button",variant:"outline",onClick:()=>b.push("/dashboard/documents"),children:"Batal"})]})]})})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsx)(n.CardTitle,{children:"Informasi File"})}),(0,t.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(d.Label,{className:"text-sm font-medium",children:"Nama File"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 break-all",children:y.fileName})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.Label,{className:"text-sm font-medium",children:"Ukuran File"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:(e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]})(y.fileSize)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.Label,{className:"text-sm font-medium",children:"Tipe File"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:y.mimeType})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.Label,{className:"text-sm font-medium",children:"Versi"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:y.version})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.Label,{className:"text-sm font-medium",children:"Dibuat"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:new Date(y.createdAt).toLocaleDateString("id-ID")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.Label,{className:"text-sm font-medium",children:"Terakhir Diubah"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:new Date(y.updatedAt).toLocaleDateString("id-ID")})]})]})]})})]})]}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(p.FileText,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Dokumen Tidak Ditemukan"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Dokumen yang Anda cari tidak ditemukan atau telah dihapus."}),(0,t.jsx)(l.Button,{onClick:()=>b.push("/dashboard/documents"),children:"Kembali ke Daftar Dokumen"})]})}}]);