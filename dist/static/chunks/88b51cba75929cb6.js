(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16715,e=>{"use strict";e.s(["RefreshCw",()=>t],16715);let t=(0,e.i(75254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},27612,e=>{"use strict";e.s(["Trash2",()=>t],27612);let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},15288,e=>{"use strict";e.s(["Card",()=>r,"CardContent",()=>l,"CardDescription",()=>n,"CardHeader",()=>s,"CardTitle",()=>i]);var t=e.i(43476),a=e.i(75157);function r(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),...s})}function s(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...s})}function i(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",r),...s})}function n(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",r),...s})}function l(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",r),...s})}},93479,e=>{"use strict";e.s(["Input",()=>r]);var t=e.i(43476),a=e.i(75157);function r(e){let{className:r,type:s,...i}=e;return(0,t.jsx)("input",{type:s,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...i})}},40160,e=>{"use strict";e.s(["Download",()=>t],40160);let t=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},87130,e=>{"use strict";e.s(["Filter",()=>t],87130);let t=(0,e.i(75254).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},33467,e=>{"use strict";e.s(["BarChart",()=>t],33467);let t=(0,e.i(75254).default)("chart-no-axes-column-increasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]])},87297,e=>{"use strict";e.s(["default",()=>g],87297);var t=e.i(43476),a=e.i(71645),r=e.i(57951),s=e.i(15288),i=e.i(19455),n=e.i(93479),l=e.i(33467),d=e.i(40160),c=e.i(87130),o=e.i(78583),x=e.i(75254);let m=(0,x.default)("circle-arrow-up",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]),p=(0,x.default)("circle-arrow-down",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);var h=e.i(16715),u=e.i(27612);function g(){let{token:e,user:x}=(0,r.useAuth)(),[g,y]=(0,a.useState)([]),[j,f]=(0,a.useState)(!1),[v,b]=(0,a.useState)({page:1,limit:10,total:0,pages:0}),[N,D]=(0,a.useState)({department:"",action:"",startDate:"",endDate:"",page:1,limit:10}),[w,k]=(0,a.useState)(!1);(0,a.useEffect)(()=>{A()},[x,N.page]);let A=async()=>{try{f(!0);let t=new URLSearchParams({page:N.page.toString(),limit:N.limit.toString()});N.department&&t.append("department",N.department),N.action&&t.append("action",N.action),N.startDate&&t.append("startDate",N.startDate),N.endDate&&t.append("endDate",N.endDate);let a=await fetch("/api/archive-reports?".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});if(a.ok){let e=await a.json();y(e.reports||[]),b(e.pagination||{})}}catch(e){console.error("Failed to fetch archive reports:",e)}finally{f(!1)}},C=async()=>{try{let t=new URLSearchParams;N.department&&t.append("department",N.department),N.action&&t.append("action",N.action),N.startDate&&t.append("startDate",N.startDate),N.endDate&&t.append("endDate",N.endDate),t.append("export","true");let a=await fetch("/api/archive-reports?".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});if(a.ok){let e=await a.blob(),t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="archive-reports-".concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(t),document.body.removeChild(r)}}catch(e){console.error("Failed to export reports:",e),alert("Failed to export reports")}},E=e=>{D(t=>({...t,page:e}))};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Archive Reports"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Track document flow and archive activities"})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(i.Button,{onClick:()=>k(!w),variant:"outline",children:[(0,t.jsx)(c.Filter,{className:"w-4 h-4 mr-2"}),"Filters"]}),(0,t.jsxs)(i.Button,{onClick:C,className:"bg-[#187F7E] hover:bg-[#00AAA8]",children:[(0,t.jsx)(d.Download,{className:"w-4 h-4 mr-2"}),"Export"]})]})]}),w&&(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsxs)(s.CardTitle,{className:"flex items-center",children:[(0,t.jsx)(c.Filter,{className:"w-5 h-5 mr-2"}),"Filters"]}),(0,t.jsx)(s.CardDescription,{children:"Filter archive reports by department, action, and date range"})]}),(0,t.jsx)(s.CardContent,{children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),D(e=>({...e,page:1})),A()},className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,t.jsx)(n.Input,{type:"text",value:N.department,onChange:e=>D(t=>({...t,department:e.target.value})),placeholder:"All departments"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Action"}),(0,t.jsxs)("select",{value:N.action,onChange:e=>D(t=>({...t,action:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#187F7E]",children:[(0,t.jsx)("option",{value:"",children:"All actions"}),(0,t.jsx)("option",{value:"IN",children:"Document In"}),(0,t.jsx)("option",{value:"OUT",children:"Document Out"}),(0,t.jsx)("option",{value:"UPDATED",children:"Updated"}),(0,t.jsx)("option",{value:"DELETED",children:"Deleted"}),(0,t.jsx)("option",{value:"VIEWED",children:"Viewed"}),(0,t.jsx)("option",{value:"SHARED",children:"Shared"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,t.jsx)(n.Input,{type:"date",value:N.startDate,onChange:e=>D(t=>({...t,startDate:e.target.value}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,t.jsx)(n.Input,{type:"date",value:N.endDate,onChange:e=>D(t=>({...t,endDate:e.target.value}))})]}),(0,t.jsxs)("div",{className:"flex space-x-2 md:col-span-4",children:[(0,t.jsx)(i.Button,{type:"submit",className:"bg-[#187F7E] hover:bg-[#00AAA8]",children:"Apply Filters"}),(0,t.jsx)(i.Button,{type:"button",variant:"outline",onClick:()=>{D({department:"",action:"",startDate:"",endDate:"",page:1,limit:10}),setTimeout(A,100)},children:"Reset"})]})]})})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(l.BarChart,{className:"w-5 h-5 mr-2"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(s.CardTitle,{children:"Archive Activity Reports"}),(0,t.jsx)(s.CardDescription,{children:v.total>0?"Showing ".concat((v.page-1)*v.limit+1,"-").concat(Math.min(v.page*v.limit,v.total)," of ").concat(v.total," reports"):"No reports found"})]})]}),(0,t.jsx)(i.Button,{onClick:A,variant:"outline",size:"sm",children:(0,t.jsx)(h.RefreshCw,{className:"w-4 h-4"})})]})}),(0,t.jsx)(s.CardContent,{children:j?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-[#187F7E] border-t-transparent rounded-full animate-spin"})}):0===g.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(l.BarChart,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:"No archive reports found"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,t.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Action"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Department"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Document ID"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Performed By"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Timestamp"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Reason"})]})}),(0,t.jsx)("tbody",{children:g.map(e=>(0,t.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"py-3 px-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(e=>{switch(e){case"IN":return(0,t.jsx)(m,{className:"w-4 h-4 text-[#187F7E]"});case"OUT":return(0,t.jsx)(p,{className:"w-4 h-4 text-red-600"});case"UPDATED":return(0,t.jsx)(h.RefreshCw,{className:"w-4 h-4 text-[#00AAA8]"});case"DELETED":return(0,t.jsx)(u.Trash2,{className:"w-4 h-4 text-gray-600"});case"VIEWED":return(0,t.jsx)(o.FileText,{className:"w-4 h-4 text-[#0EB6B4]"});case"SHARED":return(0,t.jsx)(o.FileText,{className:"w-4 h-4 text-[#D4AF37]"});default:return(0,t.jsx)(o.FileText,{className:"w-4 h-4 text-gray-600"})}})(e.action),(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat({IN:"bg-[#187F7E]/10 text-[#187F7E]",OUT:"bg-red-100 text-red-800",UPDATED:"bg-[#00AAA8]/10 text-[#00AAA8]",DELETED:"bg-gray-100 text-gray-800",VIEWED:"bg-[#0EB6B4]/10 text-[#0EB6B4]",SHARED:"bg-[#D4AF37]/10 text-[#D4AF37]"}[e.action]||"bg-gray-100 text-gray-800"),children:e.action})]})}),(0,t.jsx)("td",{className:"py-3 px-4 text-sm text-gray-900",children:e.department}),(0,t.jsxs)("td",{className:"py-3 px-4 text-sm font-mono text-gray-600",children:[e.documentId.slice(0,8),"..."]}),(0,t.jsx)("td",{className:"py-3 px-4 text-sm text-gray-900",children:e.performedBy}),(0,t.jsx)("td",{className:"py-3 px-4 text-sm text-gray-500",children:new Date(e.timestamp).toLocaleString("id-ID",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),(0,t.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:(0,t.jsxs)("div",{children:[e.reason&&(0,t.jsx)("div",{className:"font-medium",children:e.reason}),e.notes&&(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.notes})]})})]},e.id))})]})}),v.pages>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,t.jsx)(i.Button,{onClick:()=>E(v.page-1),disabled:v.page<=1,variant:"outline",children:"Previous"}),(0,t.jsx)("div",{className:"flex items-center space-x-2",children:Array.from({length:Math.min(5,v.pages)},(e,a)=>{let r=Math.max(1,v.page-2)+a;return r<=v.pages?(0,t.jsx)(i.Button,{onClick:()=>E(r),variant:r===v.page?"default":"outline",size:"sm",children:r},r):null})}),(0,t.jsx)(i.Button,{onClick:()=>E(v.page+1),disabled:v.page>=v.pages,variant:"outline",children:"Next"})]})]})})]})]})}}]);