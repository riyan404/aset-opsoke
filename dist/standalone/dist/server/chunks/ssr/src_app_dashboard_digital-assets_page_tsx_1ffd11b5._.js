module.exports=[1666,a=>{"use strict";a.s(["default",()=>H],1666);var b=a.i(87924),c=a.i(72131),d=a.i(11642),e=a.i(99570),f=a.i(66718),g=a.i(91119),h=a.i(86304),i=a.i(14574),j=a.i(80701),k=a.i(33140),l=a.i(87532),m=a.i(15618),n=a.i(77156),o=a.i(24569),p=a.i(81560),q=a.i(13572),r=a.i(70106);let s=(0,r.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var t=a.i(92e3);let u=(0,r.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var v=a.i(50522),w=a.i(41675),x=a.i(46842),y=a.i(67900),z=a.i(79165),A=a.i(96101);function B({onClick:a,className:c="",variant:d="outline",size:f="md",disabled:g=!1}){return(0,b.jsxs)(e.Button,{onClick:a,variant:d,disabled:g,className:`
        bg-white 
        border 
        border-gray-300 
        hover:bg-gray-50 
        hover:border-gray-400
        text-gray-700 
        font-medium 
        rounded-lg 
        shadow-sm 
        transition-all 
        duration-200 
        flex 
        items-center 
        gap-1
        w-full
        min-w-0
        ${{sm:"px-2 py-1.5 text-xs",md:"px-4 py-2.5 text-base",lg:"px-6 py-3 text-lg"}[f]}
        ${c}
      `,children:[(0,b.jsx)(A.FolderOpen,{className:"w-3 h-3 flex-shrink-0"}),(0,b.jsx)("span",{className:"truncate",children:"Download"}),(0,b.jsx)(s,{className:"w-3 h-3 flex-shrink-0"})]})}var C=a.i(98876);let D=a=>{if(!a)return[];try{return JSON.parse(a)}catch{return[]}},E=a=>new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}),F=c.default.memo(({asset:a,onView:d,onEdit:e,onDelete:f,canWrite:i,canDelete:j,shouldLoadImage:k})=>{let[l,m]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1);return(0,b.jsx)(g.Card,{className:"group hover:shadow-lg transition-all duration-300 border-0 shadow-md hover:shadow-xl hover:-translate-y-1",children:(0,b.jsxs)(g.CardContent,{className:"p-0",children:[(0,b.jsxs)("div",{className:"relative aspect-square bg-gradient-to-br from-gray-50 to-gray-100 rounded-t-lg overflow-hidden",children:[k&&a.previewFile&&!q?(0,b.jsx)("img",{src:a.previewFile.startsWith("data:")?a.previewFile:`data:image/jpeg;base64,${a.previewFile}`,alt:a.contentName,className:`w-full h-full object-cover transition-opacity duration-300 ${l?"opacity-100":"opacity-0"}`,onLoad:()=>m(!0),onError:()=>r(!0)}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(z.ImageIcon,{className:"w-12 h-12 text-gray-400"})}),(0,b.jsx)("div",{className:"absolute top-3 right-3",children:(0,b.jsx)(h.Badge,{variant:"secondary",className:"bg-white/90 text-gray-900 text-xs",children:"RATIO_4_3"===a.aspectRatio?"4:3":"9:16"})})]}),(0,b.jsx)("div",{className:"px-3 py-3 bg-gray-50 border-b",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 w-full min-w-0",children:[(0,b.jsx)(B,{size:"sm",className:"flex-1 min-w-0 truncate text-xs sm:text-sm",onClick:()=>{a.googleDriveLink?window.open(a.googleDriveLink,"_blank"):console.log("No Google Drive link available for:",a.contentName)},disabled:!a.googleDriveLink}),(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)(C.ActionsDropdown,{items:[{label:"Lihat",icon:n.Eye,onClick:()=>d(a),variant:"default"},...i?[{label:"Edit",icon:o.Edit,onClick:()=>e(a),variant:"default"}]:[],...j?[{label:"Hapus",icon:p.Trash2,onClick:()=>f(a),variant:"destructive"}]:[]]})})]})}),(0,b.jsxs)("div",{className:"p-4 space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 line-clamp-2 text-sm leading-tight",children:a.contentName}),a.description&&(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:a.description})]}),a.tags&&a.tags.length>0&&(0,b.jsxs)("div",{className:"flex flex-wrap gap-1",children:[D(a.tags).slice(0,2).map((a,c)=>(0,b.jsx)(h.Badge,{variant:"outline",className:"text-xs px-2 py-0.5",children:a},c)),D(a.tags).length>2&&(0,b.jsxs)(h.Badge,{variant:"outline",className:"text-xs px-2 py-0.5",children:["+",D(a.tags).length-2]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(y.Building2,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"truncate",children:a.department})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(w.Calendar,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:E(a.createdAt)})]})]})]})]})})}),G=()=>(0,b.jsx)("div",{className:"grid gap-4 sm:gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5",children:Array.from({length:12}).map((a,c)=>(0,b.jsx)(g.Card,{className:"border-0 shadow-md",children:(0,b.jsxs)(g.CardContent,{className:"p-0",children:[(0,b.jsx)(k.Skeleton,{className:"aspect-square rounded-t-lg"}),(0,b.jsxs)("div",{className:"p-4 space-y-3",children:[(0,b.jsx)(k.Skeleton,{className:"h-4 w-3/4"}),(0,b.jsx)(k.Skeleton,{className:"h-3 w-full"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(k.Skeleton,{className:"h-5 w-12"}),(0,b.jsx)(k.Skeleton,{className:"h-5 w-16"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)(k.Skeleton,{className:"h-3 w-20"}),(0,b.jsx)(k.Skeleton,{className:"h-3 w-16"})]})]})]})},c))});function H(){let{token:a}=(0,d.useAuth)(),[h,k]=(0,c.useState)([]),[n,r]=(0,c.useState)(!0),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)("all"),[H,I]=(0,c.useState)(1),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)(!1),[P,Q]=(0,c.useState)({canRead:!0,canWrite:!0,canDelete:!1}),[R,S]=(0,c.useState)({isOpen:!1,message:""}),{shouldLoadImages:T,markPageAsLoaded:U}=(a=>{let[b,d]=(0,c.useState)(new Set([1]));return{shouldLoadImages:(0,c.useCallback)(a=>!0,[]),markPageAsLoaded:(0,c.useCallback)(a=>{d(b=>new Set([...b,a]))},[])}})(0),V=((a,b)=>{let[d,e]=(0,c.useState)(a);return(0,c.useEffect)(()=>{let b=setTimeout(()=>{e(a)},300);return()=>{clearTimeout(b)}},[a,300]),d})(A,300),W=(0,c.useCallback)(async(b=1,c="",d="all")=>{if(a){r(!0);try{let e=new URLSearchParams({page:b.toString(),limit:"12",...c&&{search:c},..."all"!==d&&{aspectRatio:d}}),f=await fetch(`/api/digital-assets?${e}`,{method:"GET",headers:{Authorization:`Bearer ${a}`},cache:"no-store"});if(f.ok){let a=await f.json();k(a.digitalAssets||[]),K(a.pagination),U(b)}else console.error("Failed to fetch digital assets"),k([]),K(null)}catch(a){console.error("Error fetching digital assets:",a),k([]),K(null)}finally{r(!1)}}},[a]),X=(0,c.useCallback)(async()=>{if(a)try{let b=await fetch("/api/permissions/digital-assets",{method:"GET",headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json();Q(a)}}catch(a){console.error("Error fetching permissions:",a)}finally{z(!0)}},[a]);(0,c.useEffect)(()=>{a&&X()},[a,X]),(0,c.useEffect)(()=>{a&&W(H,V,C)},[a,H,V,C,W]);let Y=a=>{I(a),window.scrollTo({top:0,behavior:"smooth"})},Z=a=>{M(a),O(!0)},$=a=>{P.canWrite?window.location.href=`/dashboard/digital-assets/${a.id}/edit`:aa("Anda tidak memiliki izin untuk mengedit aset digital")},_=async b=>{if(!P.canDelete)return void aa("Anda tidak memiliki izin untuk menghapus aset digital");if(window.confirm(`Apakah Anda yakin ingin menghapus aset digital "${b.name}"?

Tindakan ini tidak dapat dibatalkan.`))try{let c=await fetch(`/api/digital-assets/${b.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(c.ok)k(a=>a.filter(a=>a.id!==b.id)),alert("Aset digital berhasil dihapus"),W(H,V,C);else{let a=await c.json();alert(`Gagal menghapus aset digital: ${a.error||"Terjadi kesalahan"}`)}}catch(a){console.error("Error deleting asset:",a),alert("Terjadi kesalahan saat menghapus aset digital")}},aa=a=>{S({isOpen:!0,message:a})};return(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Aset Digital"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Database file design untuk kebutuhan kreatif perusahaan"})]}),P.canWrite?(0,b.jsxs)(e.Button,{onClick:()=>window.location.href="/dashboard/digital-assets/new",className:"bg-teal-600 hover:bg-teal-700 text-white",disabled:!y,children:[(0,b.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),y?"Tambah Aset Digital":"Loading..."]}):(0,b.jsxs)(e.Button,{onClick:()=>aa("Anda tidak memiliki izin untuk menambah aset digital"),className:"bg-gray-400 hover:bg-gray-500 text-white cursor-not-allowed",children:[(0,b.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),"Tambah Aset Digital"]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-8",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(l.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,b.jsx)(f.Input,{placeholder:"Cari berdasarkan nama, deskripsi, atau tag...",value:A,onChange:a=>{B(a.target.value),I(1)},className:"pl-10"})]}),(0,b.jsxs)(j.Select,{value:C,onValueChange:a=>{D(a),I(1)},children:[(0,b.jsx)(j.SelectTrigger,{className:"w-full sm:w-48",children:(0,b.jsx)(j.SelectValue,{placeholder:"Filter Rasio"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"Semua Rasio"}),(0,b.jsx)(j.SelectItem,{value:"RATIO_4_3",children:"4:3 (Landscape)"}),(0,b.jsx)(j.SelectItem,{value:"RATIO_9_16",children:"9:16 (Portrait)"})]})]})]}),J&&(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Menampilkan ",h.length," dari ",J.total," aset"]})}),n&&0===h.length&&(0,b.jsx)(G,{}),n||0!==h.length?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid gap-4 sm:gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5",children:h.map(a=>(0,b.jsx)(F,{asset:a,onView:Z,onEdit:$,onDelete:_,canWrite:P.canWrite,canDelete:P.canDelete,shouldLoadImage:T(H)},a.id))}),J&&J.pages>1&&(0,b.jsx)("div",{className:"mt-12 mb-6",children:(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-md p-4 max-w-3xl mx-auto",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Button,{onClick:()=>Y(1),disabled:1===J.page,variant:"outline",size:"sm",children:"First"}),(0,b.jsx)(e.Button,{onClick:()=>Y(J.page-1),disabled:1===J.page,variant:"outline",size:"sm",children:(0,b.jsx)(u,{className:"h-4 w-4"})})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",J.page," of ",J.pages]})}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Button,{onClick:()=>Y(J.page+1),disabled:J.page===J.pages,variant:"outline",size:"sm",children:(0,b.jsx)(v.ChevronRight,{className:"h-4 w-4"})}),(0,b.jsx)(e.Button,{onClick:()=>Y(J.pages),disabled:J.page===J.pages,variant:"outline",size:"sm",children:"Last"})]})]})})})]}):(0,b.jsx)(g.Card,{children:(0,b.jsxs)(g.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,b.jsx)(q.FileImage,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Belum ada aset digital"}),(0,b.jsx)("p",{className:"text-gray-600 text-center mb-4",children:"Mulai menambahkan file design untuk membangun database kreatif perusahaan"}),P.canWrite&&(0,b.jsxs)(e.Button,{onClick:()=>window.location.href="/dashboard/digital-assets/new",className:"bg-teal-600 hover:bg-teal-700 text-white",children:[(0,b.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),"Tambah Aset Digital Pertama"]})]})}),(0,b.jsx)(i.Dialog,{open:N,onOpenChange:O,children:(0,b.jsxs)(i.DialogContent,{className:"max-w-6xl max-h-[95vh] overflow-hidden p-0",children:[(0,b.jsxs)(i.DialogHeader,{className:"px-6 py-4 border-b bg-gradient-to-r from-blue-50 to-purple-50",children:[(0,b.jsx)(i.DialogTitle,{className:"text-xl font-bold text-gray-900",children:L?.contentName}),(0,b.jsx)(i.DialogDescription,{className:"text-gray-600",children:"Detail informasi aset digital"})]}),L&&(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row h-full overflow-hidden",children:[(0,b.jsx)("div",{className:"lg:w-1/2 p-6 bg-gray-50 flex flex-col",children:(0,b.jsx)("div",{className:"flex-1 bg-white rounded-xl shadow-sm overflow-hidden",children:(0,b.jsx)("div",{className:"aspect-square bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center p-0",children:L.previewFile?(0,b.jsx)("img",{src:L.previewFile.startsWith("data:")?L.previewFile:`data:image/jpeg;base64,${L.previewFile}`,alt:L.contentName,className:"w-full h-full object-cover"}):(0,b.jsxs)("div",{className:"text-gray-400",children:[(0,b.jsx)(q.FileImage,{className:"w-20 h-20 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-sm",children:"Tidak ada preview"})]})})})}),(0,b.jsx)("div",{className:"lg:w-1/2 p-6 overflow-y-auto",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 flex items-center",children:[(0,b.jsx)("div",{className:"w-2 h-6 bg-gradient-to-b from-blue-500 to-purple-500 rounded-full mr-3"}),"Informasi Dasar"]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-2",children:[(0,b.jsx)("span",{className:"text-gray-600 font-medium",children:"Nama:"}),(0,b.jsx)("span",{className:"font-semibold text-gray-900 break-words",children:L.contentName})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-2",children:[(0,b.jsx)("span",{className:"text-gray-600 font-medium",children:"Rasio Aspek:"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:`w-3 h-3 rounded-full ${"RATIO_4_3"===L.aspectRatio?"bg-blue-500":"bg-purple-500"}`}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:"RATIO_4_3"===L.aspectRatio?"4:3 (Landscape)":"9:16 (Portrait)"})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-2",children:[(0,b.jsx)("span",{className:"text-gray-600 font-medium",children:"Departemen:"}),(0,b.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gradient-to-r from-blue-100 to-purple-100 text-gray-800",children:L.department})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 flex items-center",children:[(0,b.jsx)("div",{className:"w-2 h-6 bg-gradient-to-b from-green-500 to-teal-500 rounded-full mr-3"}),"Informasi File"]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-2",children:[(0,b.jsx)("span",{className:"text-gray-600 font-medium",children:"Dibuat oleh:"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:(0,b.jsx)(x.User,{className:"w-4 h-4 text-white"})}),(0,b.jsxs)("span",{className:"font-semibold text-gray-900",children:[L.createdBy.firstName," ",L.createdBy.lastName]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-2",children:[(0,b.jsx)("span",{className:"text-gray-600 font-medium",children:"Tanggal dibuat:"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-teal-500 rounded-full flex items-center justify-center",children:(0,b.jsx)(w.Calendar,{className:"w-4 h-4 text-white"})}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:E(L.createdAt)})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-2",children:[(0,b.jsx)("span",{className:"text-gray-600 font-medium",children:"Terakhir diupdate:"}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:E(L.updatedAt)})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-2",children:[(0,b.jsx)("span",{className:"text-gray-600 font-medium",children:"Nama file:"}),(0,b.jsx)("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded break-all",children:L.previewFileName})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-2",children:[(0,b.jsx)("span",{className:"text-gray-600 font-medium",children:"Ukuran file:"}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:L.previewFileSize?`${(L.previewFileSize/1024/1024).toFixed(2)} MB`:"-"})]})]})]}),(0,b.jsx)("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsxs)(e.Button,{onClick:()=>L.googleDriveLink&&window.open(L.googleDriveLink,"_blank"),className:"flex-1 bg-gradient-to-r from-teal-600 to-teal-700 hover:from-teal-700 hover:to-teal-800 text-white shadow-lg",disabled:!L.googleDriveLink,children:[(0,b.jsx)(s,{className:"w-4 h-4 mr-2"}),"Buka di Google Drive"]}),P.canWrite&&(0,b.jsxs)(e.Button,{onClick:()=>{O(!1),console.log("Edit asset:",L)},variant:"outline",className:"flex-1 border-blue-200 text-blue-700 hover:bg-blue-50",children:[(0,b.jsx)(o.Edit,{className:"w-4 h-4 mr-2"}),"Edit"]}),P.canDelete&&(0,b.jsxs)(e.Button,{onClick:()=>{O(!1),_(L)},variant:"outline",className:"flex-1 border-red-200 text-red-700 hover:bg-red-50",children:[(0,b.jsx)(p.Trash2,{className:"w-4 h-4 mr-2"}),"Hapus"]})]})})]})})]})]})}),(0,b.jsx)(i.Dialog,{open:R.isOpen,onOpenChange:a=>S({...R,isOpen:a}),children:(0,b.jsxs)(i.DialogContent,{children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsxs)(i.DialogTitle,{className:"flex items-center gap-2 text-red-600",children:[(0,b.jsx)(t.AlertCircle,{className:"h-5 w-5"}),"Akses Ditolak"]}),(0,b.jsx)(i.DialogDescription,{children:R.message})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)(e.Button,{onClick:()=>S({...R,isOpen:!1}),variant:"outline",children:"Tutup"})})]})})]})}}];

//# sourceMappingURL=src_app_dashboard_digital-assets_page_tsx_1ffd11b5._.js.map