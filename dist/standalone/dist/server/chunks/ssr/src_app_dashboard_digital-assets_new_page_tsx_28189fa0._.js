module.exports=[32275,a=>{"use strict";a.s(["default",()=>D]);var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(11642),f=a.i(73347),g=a.i(99570),h=a.i(91119),i=a.i(66718),j=a.i(70430),k=a.i(29246),l=a.i(80701),m=a.i(86304),n=a.i(210),o=a.i(15618),p=a.i(73320),q=a.i(33508),r=a.i(13572),s=a.i(79165),t=a.i(97063),u=a.i(16201),v=a.i(92e3),w=a.i(96221),x=a.i(33350),y=a.i(79257),z=a.i(56421),A=a.i(4720),B=a.i(83227);function C(){let a=(0,d.useRouter)(),{user:f,token:C}=(0,e.useAuth)(),{toast:D}=(0,B.useToast)(),E=(0,c.useRef)(null),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(0),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)(!1),[P,Q]=(0,c.useState)({contentName:"",description:"",aspectRatio:"RATIO_4_3",googleDriveLink:"",tags:"",previewFile:null}),R=(a,b)=>{Q(c=>({...c,[a]:b}))},S=async a=>{let b=a.target.files?.[0];if(b){if(!b.type.startsWith("image/"))return void D({title:"Error",description:"Hanya file gambar yang diperbolehkan",variant:"destructive"});if(b.size>0x1400000)return void D({title:"Error",description:"Ukuran file maksimal 20MB",variant:"destructive"});try{I(!0),K(10);let a=await ((a,b=500)=>new Promise(c=>{let d=document.createElement("canvas"),e=d.getContext("2d"),f=new Image;f.onload=()=>{K(30);let g=1200,h=.9,i=0,j=()=>{K(30+i/10*50);let k=Math.min(g/f.width,g/f.height);d.width=f.width*k,d.height=f.height*k,e?.clearRect(0,0,d.width,d.height),e?.drawImage(f,0,0,d.width,d.height),d.toBlob(d=>{d&&(d.size/1024<=b||i>=10?(K(100),c(new File([d],a.name,{type:"image/jpeg",lastModified:Date.now()}))):(i++,h>.3?h-=.1:(g=Math.max(400,.8*g),h=.7),setTimeout(j,10)))},"image/jpeg",h)};j()},f.src=URL.createObjectURL(a)}))(b),c=URL.createObjectURL(a);M(c),Q(b=>({...b,previewFile:a})),D({title:"Berhasil",description:`File berhasil dikompres dari ${(b.size/1024/1024).toFixed(2)}MB menjadi ${(a.size/1024).toFixed(0)}KB`})}catch(a){console.error("Error compressing image:",a),D({title:"Error",description:"Gagal mengompres gambar",variant:"destructive"})}finally{I(!1),K(0)}}},T=async b=>{if(b.preventDefault(),!P.contentName.trim())return void D({title:"Error",description:"Nama konten harus diisi",variant:"destructive"});try{G(!0);let b=P.tags.split(",").map(a=>a.trim()).filter(Boolean),c=new FormData;c.append("contentName",P.contentName),c.append("description",P.description),c.append("aspectRatio",P.aspectRatio),c.append("googleDriveLink",P.googleDriveLink),c.append("tags",JSON.stringify(b)),c.append("department",f?.department||"Digital"),P.previewFile&&c.append("previewFile",P.previewFile);let d=await fetch("/api/digital-assets",{method:"POST",headers:{Authorization:`Bearer ${C}`},body:c});if(!d.ok){let a=await d.text();throw Error(`Failed to create digital asset: ${d.status} - ${a}`)}D({title:"Berhasil",description:"Aset digital berhasil ditambahkan"}),a.push("/dashboard/digital-assets")}catch(a){console.error("Failed to create digital asset:",a),D({title:"Error",description:"Gagal menambahkan aset digital",variant:"destructive"})}finally{G(!1)}};return(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100/50",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-6",children:[(0,b.jsxs)(g.Button,{variant:"outline",onClick:()=>a.back(),className:"flex items-center gap-2 border-gray-200 hover:bg-gray-50",children:[(0,b.jsx)(n.ArrowLeft,{className:"h-4 w-4"}),"Kembali"]}),(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-teal-100 rounded-lg",children:(0,b.jsx)(o.Plus,{className:"w-6 h-6 text-teal-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Tambah Aset Digital"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Tambahkan file design baru ke dalam database kreatif perusahaan"})]})]})})]}),(0,b.jsxs)(h.Card,{className:"border-0 shadow-lg",children:[(0,b.jsx)(h.CardHeader,{className:"bg-gradient-to-r from-teal-50 to-teal-100/50 rounded-t-lg",children:(0,b.jsxs)(h.CardTitle,{className:"flex items-center gap-2 text-xl",children:[(0,b.jsx)(r.FileImage,{className:"w-5 h-5 text-teal-600"}),"Informasi Aset Digital"]})}),(0,b.jsx)(h.CardContent,{className:"p-8",children:(0,b.jsxs)("form",{onSubmit:T,className:"space-y-8",children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(t.Info,{className:"w-5 h-5 text-blue-600"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Informasi Dasar"})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)(j.Label,{htmlFor:"contentName",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(A.FileText,{className:"w-4 h-4 text-gray-500"}),"Nama Konten ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(i.Input,{id:"contentName",value:P.contentName,onChange:a=>R("contentName",a.target.value),placeholder:"Masukkan nama konten",required:!0,className:"h-12 border-gray-200 focus:border-teal-500 focus:ring-teal-500"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)(j.Label,{htmlFor:"aspectRatio",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(z.RectangleHorizontal,{className:"w-4 h-4 text-gray-500"}),"Rasio Aspek"]}),(0,b.jsxs)(l.Select,{value:P.aspectRatio,onValueChange:a=>R("aspectRatio",a),children:[(0,b.jsx)(l.SelectTrigger,{className:"h-12 border-gray-200",children:(0,b.jsx)(l.SelectValue,{})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"RATIO_4_3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Badge,{variant:"secondary",children:"4:3"}),(0,b.jsx)("span",{children:"Landscape"})]})}),(0,b.jsx)(l.SelectItem,{value:"RATIO_9_16",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Badge,{variant:"secondary",children:"9:16"}),(0,b.jsx)("span",{children:"Portrait"})]})})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(j.Label,{htmlFor:"description",className:"text-sm font-medium",children:"Deskripsi"}),(0,b.jsx)(k.Textarea,{id:"description",value:P.description,onChange:a=>R("description",a.target.value),placeholder:"Masukkan deskripsi aset digital",rows:4,className:"border-gray-200 focus:border-teal-500 focus:ring-teal-500 resize-none"})]})]}),(0,b.jsx)("div",{className:"border-t border-gray-200 my-8"}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(p.Upload,{className:"w-5 h-5 text-purple-600"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Upload Preview File"})]}),(0,b.jsxs)("div",{className:`relative border-2 border-dashed rounded-xl p-8 transition-all duration-300 ${N?"border-teal-500 bg-teal-50 scale-[1.02]":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,onDragOver:a=>{a.preventDefault(),O(!0)},onDragLeave:a=>{a.preventDefault(),O(!1)},onDrop:a=>{a.preventDefault(),O(!1);let b=a.dataTransfer.files;b.length>0&&S({target:{files:[b[0]]}})},children:[L?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"relative max-w-md mx-auto",children:[(0,b.jsx)(h.Card,{className:"border-0 shadow-md overflow-hidden",children:(0,b.jsx)("img",{src:L,alt:"Preview",className:"w-full h-64 object-cover"})}),(0,b.jsx)(g.Button,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 rounded-full w-8 h-8 p-0 shadow-lg",onClick:()=>{M(null),Q(a=>({...a,previewFile:null})),E.current&&(E.current.value="")},children:(0,b.jsx)(q.X,{className:"h-4 w-4"})})]}),(0,b.jsxs)("div",{className:"text-center space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)(u.CheckCircle,{className:"w-5 h-5 text-green-600"}),(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:P.previewFile?.name})]}),(0,b.jsxs)(m.Badge,{variant:"secondary",className:"bg-green-100 text-green-700",children:["Ukuran: ",P.previewFile?(P.previewFile.size/1024).toFixed(0):"0","KB"]})]})]}):(0,b.jsxs)("div",{className:"text-center space-y-6",children:[(0,b.jsx)("div",{className:"p-4 bg-gray-100 rounded-full w-20 h-20 mx-auto flex items-center justify-center",children:(0,b.jsx)(s.ImageIcon,{className:"h-10 w-10 text-gray-400"})}),H?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)(w.Loader2,{className:"w-5 h-5 animate-spin text-teal-600"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Mengompres gambar..."})]}),(0,b.jsxs)("div",{className:"max-w-xs mx-auto",children:[(0,b.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,b.jsx)("div",{className:"bg-teal-600 h-2 rounded-full transition-all duration-300",style:{width:`${J}%`}})}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1 text-center",children:[J,"% selesai"]})]})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)(g.Button,{type:"button",variant:"outline",onClick:()=>E.current?.click(),className:"border-2 border-dashed border-teal-300 hover:border-teal-500 hover:bg-teal-50 text-teal-700 hover:text-teal-800",size:"lg",children:[(0,b.jsx)(p.Upload,{className:"mr-2 h-5 w-5"}),"Pilih File"]}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"atau drag & drop file disini"})]}),(0,b.jsx)("div",{className:"bg-blue-50 rounded-lg p-4 max-w-md mx-auto",children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(t.Info,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"text-xs text-blue-700 space-y-1",children:[(0,b.jsx)("p",{className:"font-medium",children:"Format yang didukung:"}),(0,b.jsx)("p",{children:"PNG, JPG, GIF hingga 20MB"}),(0,b.jsx)("p",{children:"File akan dikompres otomatis menjadi maksimal 500KB untuk preview"})]})]})})]}),(0,b.jsx)("input",{ref:E,type:"file",accept:"image/*",onChange:S,className:"hidden"})]})]}),(0,b.jsx)("div",{className:"border-t border-gray-200 my-8"}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(y.Link,{className:"w-5 h-5 text-green-600"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Informasi Tambahan"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)(j.Label,{htmlFor:"googleDriveLink",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(y.Link,{className:"w-4 h-4 text-gray-500"}),"Link Google Drive"]}),(0,b.jsx)(i.Input,{id:"googleDriveLink",type:"url",value:P.googleDriveLink,onChange:a=>R("googleDriveLink",a.target.value),placeholder:"https://drive.google.com/file/d/...",className:"h-12 border-gray-200 focus:border-teal-500 focus:ring-teal-500"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)(j.Label,{htmlFor:"tags",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(x.Tag,{className:"w-4 h-4 text-gray-500"}),"Tags"]}),(0,b.jsx)(i.Input,{id:"tags",value:P.tags,onChange:a=>R("tags",a.target.value),placeholder:"logo, branding, marketing",className:"h-12 border-gray-200 focus:border-teal-500 focus:ring-teal-500"}),(0,b.jsx)("div",{className:"bg-amber-50 rounded-lg p-3",children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(v.AlertCircle,{className:"w-4 h-4 text-amber-600 mt-0.5 flex-shrink-0"}),(0,b.jsx)("p",{className:"text-xs text-amber-700",children:"Pisahkan tag dengan koma untuk memudahkan pencarian dan kategorisasi aset"})]})})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-8 border-t border-gray-200",children:[(0,b.jsx)(g.Button,{type:"button",variant:"outline",onClick:()=>a.back(),disabled:F,className:"border-gray-200 hover:bg-gray-50",size:"lg",children:"Batal"}),(0,b.jsx)(g.Button,{type:"submit",disabled:F||H,className:"bg-teal-600 hover:bg-teal-700 text-white shadow-lg hover:shadow-xl transition-all duration-300",size:"lg",children:F?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w.Loader2,{className:"animate-spin mr-2 h-5 w-5"}),"Menyimpan..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Plus,{className:"mr-2 h-5 w-5"}),"Tambah Aset Digital"]})})]})]})})]})]})})}function D(){return(0,b.jsx)(f.default,{module:"DIGITAL_ASSETS",permission:"canWrite",children:(0,b.jsx)(C,{})})}}];

//# sourceMappingURL=src_app_dashboard_digital-assets_new_page_tsx_28189fa0._.js.map