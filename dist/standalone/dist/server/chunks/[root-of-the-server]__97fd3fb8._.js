module.exports=[18622,(e,r,t)=>{r.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},24725,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},24361,(e,r,t)=>{r.exports=e.x("util",()=>require("util"))},70406,(e,r,t)=>{r.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},93695,(e,r,t)=>{r.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},61724,(e,r,t)=>{r.exports=e.x("next/dist/compiled/next-server/app-route-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-route-turbo.runtime.prod.js"))},29173,(e,r,t)=>{r.exports=e.x("@prisma/client",()=>require("@prisma/client"))},24960,e=>{"use strict";e.s(["generateToken",()=>s,"verifyToken",()=>n,"withAuth",()=>a,"withRole",()=>o]);var r=e.i(89171),t=e.i(24652);function n(e){try{return t.default.verify(e,process.env.JWT_SECRET)}catch(e){return null}}function s(e){return t.default.sign(e,process.env.JWT_SECRET,{expiresIn:"1d"})}function a(e){return async(t,s)=>{let a=t.headers.get("authorization");console.log("Middleware: Authorization header:",a);let o=a?.replace("Bearer ","");if(console.log("Middleware: Extracted token:",o?"Token exists":"No token"),!o)return console.log("Middleware: No token provided"),r.NextResponse.json({error:"Unauthorized"},{status:401});let i=n(o);return(console.log("Middleware: Token verification result:",i?"Valid":"Invalid"),i)?(t.user=i,e(t,s)):(console.log("Middleware: Invalid token"),r.NextResponse.json({error:"Invalid token"},{status:401}))}}function o(e){return function(t){return a(async(n,s)=>n.user&&e.includes(n.user.role)?t(n,s):r.NextResponse.json({error:"Forbidden"},{status:403}))}}},48886,e=>{"use strict";e.s(["SYSTEM_MODULES",()=>n,"checkUserPermissions",()=>t]);let r=new(e.i(29173)).PrismaClient;async function t(e,t,n){try{if("ADMIN"===t)return{canRead:!0,canWrite:!0,canDelete:!0};if(!e)return{canRead:!0,canWrite:!1,canDelete:!1};let s=r.departmentPermission.findFirst({where:{department:e,module:n,isActive:!0}}),a=new Promise((e,r)=>setTimeout(()=>r(Error("Database query timeout")),3e3)),o=await Promise.race([s,a]);return o?{canRead:o.canRead,canWrite:o.canWrite,canDelete:o.canDelete}:{canRead:!0,canWrite:!1,canDelete:!1}}catch(e){return console.error("Error checking user permissions:",e),{canRead:!0,canWrite:!1,canDelete:!1}}}let n={ASSETS:"ASSETS",DOCUMENTS:"DOCUMENTS",DIGITAL_ASSETS:"DIGITAL_ASSETS",USERS:"USERS",AUDIT_LOGS:"AUDIT_LOGS",REPORTS:"REPORTS",SETTINGS:"SETTINGS"}},26502,(e,r,t)=>{}];

//# sourceMappingURL=%5Broot-of-the-server%5D__97fd3fb8._.js.map